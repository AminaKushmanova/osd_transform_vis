{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}"},"title":"sample_sankey_with_apache_echart","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"sample_sankey_with_apache_echart\",\"type\":\"transform\",\"aggs\":[],\"params\":{\"formula\":\"<div id=\\\"main\\\" style=\\\"width: 800px;height:600px;\\\"></div>\",\"meta\":\"({\\n  after_render: function() {\\n    //-------------------------------------------------------------------------\\n    // function to get the location of a CSS selector within a shadow DOM \\n    //-------------------------------------------------------------------------\\n    function getShadowDomLocation(selector) {\\n      let vizLocation;\\n      // output-viz being the top selector used by the Transform plugin\\n      // Get all the output-viz elements (can have mutliple selector if multiple transfrm vizs in a dashboard)\\n      // selector parameter value must be unque within the DOM\\n      const elements = $('.output-vis');\\n      let shadow;\\n      for (let elem of elements) {\\n        shadow = elem.shadowRoot;\\n        vizLocation = $(shadow).find(selector);\\n        if (vizLocation.length > 0) {\\n          // selector found, exiting\\n          break;\\n        } else {\\n          vizLocation = '.notFound';\\n        } \\n      } \\n      const obj = {\\n      vizLocation: vizLocation,\\n      shadowRoot: shadow\\n      }\\n      // obj object contains the shadowRoot element and and the location of the selector within the shadowRoot\\n      return obj; \\n    }\\n\\n    // Set data\\n    var data = JSON.parse(`\\n      {\\\"nodes\\\": [\\n          {\\\"name\\\": \\\"Total\\\"},\\n          {\\\"name\\\": \\\"Environment\\\"},\\n          {\\\"name\\\": \\\"Land use\\\"},\\n          {\\\"name\\\": \\\"Cocoa butter (Organic)\\\"},\\n          {\\\"name\\\": \\\"Cocoa mass (Organic)\\\"},\\n          {\\\"name\\\": \\\"Hazelnuts (Organic)\\\"},\\n          {\\\"name\\\": \\\"Cane sugar (Organic)\\\"},\\n          {\\\"name\\\": \\\"Vegetables (Organic)\\\"},\\n          {\\\"name\\\": \\\"Climate change\\\"},\\n          {\\\"name\\\": \\\"Harmful substances\\\"},\\n          {\\\"name\\\": \\\"Water use\\\"},\\n          {\\\"name\\\": \\\"Resource depletion\\\"},\\n          {\\\"name\\\": \\\"Refrigeration\\\"},\\n          {\\\"name\\\": \\\"Packaging\\\"},\\n          {\\\"name\\\": \\\"Human rights\\\"},\\n          {\\\"name\\\": \\\"Child labour\\\"},\\n          {\\\"name\\\": \\\"Coconut oil (Organic)\\\"},\\n          {\\\"name\\\": \\\"Forced labour\\\"},\\n          {\\\"name\\\": \\\"Health safety\\\"},\\n          {\\\"name\\\": \\\"Access to water\\\"},\\n          {\\\"name\\\": \\\"Freedom of association\\\"},\\n          {\\\"name\\\": \\\"Access to land\\\"},\\n          {\\\"name\\\": \\\"Sufficient wage\\\"},\\n          {\\\"name\\\": \\\"Equal rights migrants\\\"},\\n          {\\\"name\\\": \\\"Discrimination\\\"},\\n          {\\\"name\\\": \\\"Working hours\\\"}\\n       ],\\n       \\\"links\\\": [\\n          {\\\"source\\\": \\\"Total\\\", \\\"target\\\": \\\"Environment\\\", \\\"value\\\": 0.342284047256003},\\n          {\\\"source\\\": \\\"Environment\\\", \\\"target\\\": \\\"Land use\\\", \\\"value\\\": 0.32322870366987},\\n          {\\\"source\\\": \\\"Land use\\\", \\\"target\\\": \\\"Cocoa butter (Organic)\\\", \\\"value\\\": 0.177682517071359},\\n          {\\\"source\\\": \\\"Land use\\\", \\\"target\\\": \\\"Cocoa mass (Organic)\\\", \\\"value\\\": 0.137241325342711},\\n          {\\\"source\\\": \\\"Land use\\\", \\\"target\\\": \\\"Hazelnuts (Organic)\\\", \\\"value\\\": 0.00433076373512774},\\n          {\\\"source\\\": \\\"Land use\\\", \\\"target\\\": \\\"Cane sugar (Organic)\\\", \\\"value\\\": 0.00296956039863467},\\n          {\\\"source\\\": \\\"Land use\\\", \\\"target\\\": \\\"Vegetables (Organic)\\\", \\\"value\\\": 0.00100453712203756},\\n          {\\\"source\\\": \\\"Environment\\\", \\\"target\\\": \\\"Climate change\\\", \\\"value\\\": 0.0112886157414413},\\n          {\\\"source\\\": \\\"Climate change\\\", \\\"target\\\": \\\"Cocoa butter (Organic)\\\", \\\"value\\\": 0.00676852971933996},\\n          {\\\"source\\\": \\\"Climate change\\\", \\\"target\\\": \\\"Cocoa mass (Organic)\\\", \\\"value\\\": 0.00394686874786743},\\n          {\\\"source\\\": \\\"Climate change\\\", \\\"target\\\": \\\"Cane sugar (Organic)\\\", \\\"value\\\": 0.000315972058711838},\\n          {\\\"source\\\": \\\"Climate change\\\", \\\"target\\\": \\\"Hazelnuts (Organic)\\\", \\\"value\\\": 0.000218969462265292},\\n          {\\\"source\\\": \\\"Climate change\\\", \\\"target\\\": \\\"Vegetables (Organic)\\\", \\\"value\\\": 3.82757532567656e-05},\\n          {\\\"source\\\": \\\"Environment\\\", \\\"target\\\": \\\"Harmful substances\\\", \\\"value\\\": 0.00604275542495656},\\n          {\\\"source\\\": \\\"Harmful substances\\\", \\\"target\\\": \\\"Cocoa mass (Organic)\\\", \\\"value\\\": 0.0055125989240741},\\n          {\\\"source\\\": \\\"Harmful substances\\\", \\\"target\\\": \\\"Cocoa butter (Organic)\\\", \\\"value\\\": 0.000330017607892127},\\n          {\\\"source\\\": \\\"Harmful substances\\\", \\\"target\\\": \\\"Cane sugar (Organic)\\\", \\\"value\\\": 0.000200138892990337},\\n          {\\\"source\\\": \\\"Harmful substances\\\", \\\"target\\\": \\\"Hazelnuts (Organic)\\\", \\\"value\\\": 0},\\n          {\\\"source\\\": \\\"Harmful substances\\\", \\\"target\\\": \\\"Vegetables (Organic)\\\", \\\"value\\\": 0},\\n          {\\\"source\\\": \\\"Environment\\\", \\\"target\\\": \\\"Water use\\\", \\\"value\\\": 0.00148345269044703},\\n          {\\\"source\\\": \\\"Water use\\\", \\\"target\\\": \\\"Cocoa butter (Organic)\\\", \\\"value\\\": 0.00135309891304186},\\n          {\\\"source\\\": \\\"Water use\\\", \\\"target\\\": \\\"Cocoa mass (Organic)\\\", \\\"value\\\": 0.000105714137908639},\\n          {\\\"source\\\": \\\"Water use\\\", \\\"target\\\": \\\"Hazelnuts (Organic)\\\", \\\"value\\\": 1.33452642581887e-05},\\n          {\\\"source\\\": \\\"Water use\\\", \\\"target\\\": \\\"Cane sugar (Organic)\\\", \\\"value\\\": 8.78074837009238e-06},\\n          {\\\"source\\\": \\\"Water use\\\", \\\"target\\\": \\\"Vegetables (Organic)\\\", \\\"value\\\": 2.5136268682477e-06},\\n          {\\\"source\\\": \\\"Environment\\\", \\\"target\\\": \\\"Resource depletion\\\", \\\"value\\\": 0.000240519729288764},\\n          {\\\"source\\\": \\\"Resource depletion\\\", \\\"target\\\": \\\"Cane sugar (Organic)\\\", \\\"value\\\": 0.000226237279345084},\\n          {\\\"source\\\": \\\"Resource depletion\\\", \\\"target\\\": \\\"Vegetables (Organic)\\\", \\\"value\\\": 1.42824499436793e-05},\\n          {\\\"source\\\": \\\"Resource depletion\\\", \\\"target\\\": \\\"Hazelnuts (Organic)\\\", \\\"value\\\": 0},\\n          {\\\"source\\\": \\\"Resource depletion\\\", \\\"target\\\": \\\"Cocoa mass (Organic)\\\", \\\"value\\\": 0},\\n          {\\\"source\\\": \\\"Resource depletion\\\", \\\"target\\\": \\\"Cocoa butter (Organic)\\\", \\\"value\\\": 0},\\n          {\\\"source\\\": \\\"Environment\\\", \\\"target\\\": \\\"Refrigeration\\\", \\\"value\\\": 0},\\n          {\\\"source\\\": \\\"Environment\\\", \\\"target\\\": \\\"Packaging\\\", \\\"value\\\": 0},\\n          {\\\"source\\\": \\\"Total\\\", \\\"target\\\": \\\"Human rights\\\", \\\"value\\\": 0.307574096993239},\\n          {\\\"source\\\": \\\"Human rights\\\", \\\"target\\\": \\\"Child labour\\\", \\\"value\\\": 0.0410641202645833},\\n          {\\\"source\\\": \\\"Child labour\\\", \\\"target\\\": \\\"Hazelnuts (Organic)\\\", \\\"value\\\": 0.0105339381639722},\\n          {\\\"source\\\": \\\"Child labour\\\", \\\"target\\\": \\\"Cocoa mass (Organic)\\\", \\\"value\\\": 0.0105},\\n          {\\\"source\\\": \\\"Child labour\\\", \\\"target\\\": \\\"Cocoa butter (Organic)\\\", \\\"value\\\": 0.0087294420777},\\n          {\\\"source\\\": \\\"Child labour\\\", \\\"target\\\": \\\"Coconut oil (Organic)\\\", \\\"value\\\": 0.00474399974233333},\\n          {\\\"source\\\": \\\"Child labour\\\", \\\"target\\\": \\\"Cane sugar (Organic)\\\", \\\"value\\\": 0.00388226450884445},\\n          {\\\"source\\\": \\\"Child labour\\\", \\\"target\\\": \\\"Vegetables (Organic)\\\", \\\"value\\\": 0.00267447577173333},\\n          {\\\"source\\\": \\\"Human rights\\\", \\\"target\\\": \\\"Forced labour\\\", \\\"value\\\": 0.0365458590642445},\\n          {\\\"source\\\": \\\"Forced labour\\\", \\\"target\\\": \\\"Hazelnuts (Organic)\\\", \\\"value\\\": 0.0114913076376389},\\n          {\\\"source\\\": \\\"Forced labour\\\", \\\"target\\\": \\\"Cocoa butter (Organic)\\\", \\\"value\\\": 0.0081134807347},\\n          {\\\"source\\\": \\\"Forced labour\\\", \\\"target\\\": \\\"Cocoa mass (Organic)\\\", \\\"value\\\": 0.00765230236575},\\n          {\\\"source\\\": \\\"Forced labour\\\", \\\"target\\\": \\\"Cane sugar (Organic)\\\", \\\"value\\\": 0.004},\\n          {\\\"source\\\": \\\"Forced labour\\\", \\\"target\\\": \\\"Vegetables (Organic)\\\", \\\"value\\\": 0.00296668823626667},\\n          {\\\"source\\\": \\\"Forced labour\\\", \\\"target\\\": \\\"Coconut oil (Organic)\\\", \\\"value\\\": 0.00232208008988889},\\n          {\\\"source\\\": \\\"Human rights\\\", \\\"target\\\": \\\"Health safety\\\", \\\"value\\\": 0.0345435327843611},\\n          {\\\"source\\\": \\\"Health safety\\\", \\\"target\\\": \\\"Hazelnuts (Organic)\\\", \\\"value\\\": 0.0121419536385},\\n          {\\\"source\\\": \\\"Health safety\\\", \\\"target\\\": \\\"Cocoa mass (Organic)\\\", \\\"value\\\": 0.00766772850678333},\\n          {\\\"source\\\": \\\"Health safety\\\", \\\"target\\\": \\\"Cocoa butter (Organic)\\\", \\\"value\\\": 0.0056245892061},\\n          {\\\"source\\\": \\\"Health safety\\\", \\\"target\\\": \\\"Coconut oil (Organic)\\\", \\\"value\\\": 0.00361616847688889},\\n          {\\\"source\\\": \\\"Health safety\\\", \\\"target\\\": \\\"Cane sugar (Organic)\\\", \\\"value\\\": 0.00277374682533333},\\n          {\\\"source\\\": \\\"Health safety\\\", \\\"target\\\": \\\"Vegetables (Organic)\\\", \\\"value\\\": 0.00271934613075556},\\n          {\\\"source\\\": \\\"Human rights\\\", \\\"target\\\": \\\"Access to water\\\", \\\"value\\\": 0.0340206659360667},\\n          {\\\"source\\\": \\\"Access to water\\\", \\\"target\\\": \\\"Cocoa mass (Organic)\\\", \\\"value\\\": 0.0105},\\n          {\\\"source\\\": \\\"Access to water\\\", \\\"target\\\": \\\"Cocoa butter (Organic)\\\", \\\"value\\\": 0.0089274160792},\\n          {\\\"source\\\": \\\"Access to water\\\", \\\"target\\\": \\\"Hazelnuts (Organic)\\\", \\\"value\\\": 0.0054148022845},\\n          {\\\"source\\\": \\\"Access to water\\\", \\\"target\\\": \\\"Cane sugar (Organic)\\\", \\\"value\\\": 0.00333938149786667},\\n          {\\\"source\\\": \\\"Access to water\\\", \\\"target\\\": \\\"Vegetables (Organic)\\\", \\\"value\\\": 0.00314663377488889},\\n          {\\\"source\\\": \\\"Access to water\\\", \\\"target\\\": \\\"Coconut oil (Organic)\\\", \\\"value\\\": 0.00269243229961111},\\n          {\\\"source\\\": \\\"Human rights\\\", \\\"target\\\": \\\"Freedom of association\\\", \\\"value\\\": 0.0320571523941667},\\n          {\\\"source\\\": \\\"Freedom of association\\\", \\\"target\\\": \\\"Hazelnuts (Organic)\\\", \\\"value\\\": 0.0132312483463611},\\n          {\\\"source\\\": \\\"Freedom of association\\\", \\\"target\\\": \\\"Cocoa butter (Organic)\\\", \\\"value\\\": 0.0077695200707},\\n          {\\\"source\\\": \\\"Freedom of association\\\", \\\"target\\\": \\\"Cocoa mass (Organic)\\\", \\\"value\\\": 0.00510606573995},\\n          {\\\"source\\\": \\\"Freedom of association\\\", \\\"target\\\": \\\"Vegetables (Organic)\\\", \\\"value\\\": 0.00354321156324444},\\n          {\\\"source\\\": \\\"Freedom of association\\\", \\\"target\\\": \\\"Cane sugar (Organic)\\\", \\\"value\\\": 0.00240710667391111},\\n          {\\\"source\\\": \\\"Freedom of association\\\", \\\"target\\\": \\\"Coconut oil (Organic)\\\", \\\"value\\\": 0},\\n          {\\\"source\\\": \\\"Human rights\\\", \\\"target\\\": \\\"Access to land\\\", \\\"value\\\": 0.0315022209894056},\\n          {\\\"source\\\": \\\"Access to land\\\", \\\"target\\\": \\\"Hazelnuts (Organic)\\\", \\\"value\\\": 0.00964970063322223},\\n          {\\\"source\\\": \\\"Access to land\\\", \\\"target\\\": \\\"Cocoa mass (Organic)\\\", \\\"value\\\": 0.00938530207965},\\n          {\\\"source\\\": \\\"Access to land\\\", \\\"target\\\": \\\"Cocoa butter (Organic)\\\", \\\"value\\\": 0.0060110791848},\\n          {\\\"source\\\": \\\"Access to land\\\", \\\"target\\\": \\\"Cane sugar (Organic)\\\", \\\"value\\\": 0.00380818314608889},\\n          {\\\"source\\\": \\\"Access to land\\\", \\\"target\\\": \\\"Vegetables (Organic)\\\", \\\"value\\\": 0.00264795594564445},\\n          {\\\"source\\\": \\\"Access to land\\\", \\\"target\\\": \\\"Coconut oil (Organic)\\\", \\\"value\\\": 0},\\n          {\\\"source\\\": \\\"Human rights\\\", \\\"target\\\": \\\"Sufficient wage\\\", \\\"value\\\": 0.0287776757227333},\\n          {\\\"source\\\": \\\"Sufficient wage\\\", \\\"target\\\": \\\"Cocoa mass (Organic)\\\", \\\"value\\\": 0.00883512456493333},\\n          {\\\"source\\\": \\\"Sufficient wage\\\", \\\"target\\\": \\\"Cocoa butter (Organic)\\\", \\\"value\\\": 0.0078343367268},\\n          {\\\"source\\\": \\\"Sufficient wage\\\", \\\"target\\\": \\\"Coconut oil (Organic)\\\", \\\"value\\\": 0.00347879026511111},\\n          {\\\"source\\\": \\\"Sufficient wage\\\", \\\"target\\\": \\\"Hazelnuts (Organic)\\\", \\\"value\\\": 0.00316254211388889},\\n          {\\\"source\\\": \\\"Sufficient wage\\\", \\\"target\\\": \\\"Vegetables (Organic)\\\", \\\"value\\\": 0.00281013722808889},\\n          {\\\"source\\\": \\\"Sufficient wage\\\", \\\"target\\\": \\\"Cane sugar (Organic)\\\", \\\"value\\\": 0.00265674482391111},\\n          {\\\"source\\\": \\\"Human rights\\\", \\\"target\\\": \\\"Equal rights migrants\\\", \\\"value\\\" : 0.0271146645119444},\\n          {\\\"source\\\": \\\"Equal rights migrants\\\", \\\"target\\\": \\\"Cocoa butter (Organic)\\\", \\\"value\\\": 0.0071042315061},\\n          {\\\"source\\\": \\\"Equal rights migrants\\\", \\\"target\\\": \\\"Cocoa mass (Organic)\\\", \\\"value\\\": 0.00636673210005},\\n          {\\\"source\\\": \\\"Equal rights migrants\\\", \\\"target\\\": \\\"Hazelnuts (Organic)\\\", \\\"value\\\": 0.00601459775836111},\\n          {\\\"source\\\": \\\"Equal rights migrants\\\", \\\"target\\\": \\\"Coconut oil (Organic)\\\", \\\"value\\\": 0.00429185583138889},\\n          {\\\"source\\\": \\\"Equal rights migrants\\\", \\\"target\\\": \\\"Cane sugar (Organic)\\\", \\\"value\\\": 0.00182647471915556},\\n          {\\\"source\\\": \\\"Equal rights migrants\\\", \\\"target\\\": \\\"Vegetables (Organic)\\\", \\\"value\\\": 0.00151077259688889},\\n          {\\\"source\\\": \\\"Human rights\\\", \\\"target\\\": \\\"Discrimination\\\", \\\"value\\\": 0.0211217763359833},\\n          {\\\"source\\\": \\\"Discrimination\\\", \\\"target\\\": \\\"Cocoa mass (Organic)\\\", \\\"value\\\": 0.00609671700306667},\\n          {\\\"source\\\": \\\"Discrimination\\\", \\\"target\\\": \\\"Cocoa butter (Organic)\\\", \\\"value\\\": 0.0047738806325},\\n          {\\\"source\\\": \\\"Discrimination\\\", \\\"target\\\": \\\"Coconut oil (Organic)\\\", \\\"value\\\": 0.00368119084494444},\\n          {\\\"source\\\": \\\"Discrimination\\\", \\\"target\\\": \\\"Vegetables (Organic)\\\", \\\"value\\\": 0.00286009813604444},\\n          {\\\"source\\\": \\\"Discrimination\\\", \\\"target\\\": \\\"Cane sugar (Organic)\\\", \\\"value\\\": 0.00283706180951111},\\n          {\\\"source\\\": \\\"Discrimination\\\", \\\"target\\\": \\\"Hazelnuts (Organic)\\\", \\\"value\\\": 0.000872827909916666},\\n          {\\\"source\\\": \\\"Human rights\\\", \\\"target\\\": \\\"Working hours\\\", \\\"value\\\": 0.02082642898975},\\n          {\\\"source\\\": \\\"Working hours\\\", \\\"target\\\": \\\"Hazelnuts (Organic)\\\", \\\"value\\\": 0.0107216773848333},\\n          {\\\"source\\\": \\\"Working hours\\\", \\\"target\\\": \\\"Coconut oil (Organic)\\\", \\\"value\\\": 0.00359009052944444},\\n          {\\\"source\\\": \\\"Working hours\\\", \\\"target\\\": \\\"Vegetables (Organic)\\\", \\\"value\\\": 0.00212300379075556},\\n          {\\\"source\\\": \\\"Working hours\\\", \\\"target\\\": \\\"Cocoa butter (Organic)\\\", \\\"value\\\": 0.0018518584356},\\n          {\\\"source\\\": \\\"Working hours\\\", \\\"target\\\": \\\"Cocoa mass (Organic)\\\", \\\"value\\\": 0.00158227069058333},\\n          {\\\"source\\\": \\\"Working hours\\\", \\\"target\\\": \\\"Cane sugar (Organic)\\\", \\\"value\\\": 0.000957528158533333}\\n     ]}\\n    `)\\n     \\n    // Get external JS lib\\n    $.getScript(\\\"https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.1/echarts.min.js\\\").done(function( script, textStatus ) {\\n      console.log(\\\"Import Echart js Complete\\\");\\n      \\n      // specify where is located your Gauge in the HTML doc\\n      let echartjs_location = getShadowDomLocation(\\\"#main\\\").vizLocation[0]\\n      // Remove children to avoid multiple graphs\\n      $(echartjs_location).empty();\\n\\n      // Initialize the echarts instance based on the prepared dom\\n      var myChart = echarts.init(echartjs_location);\\n\\n      var option;\\n      \\n      myChart.showLoading();\\n      myChart.hideLoading();\\n      myChart.setOption(\\n        (option = {\\n          title: {\\n            text: 'Sankey Diagram'\\n          },\\n          tooltip: {\\n            trigger: 'item',\\n            triggerOn: 'mousemove'\\n          },\\n          series: [\\n            {\\n              type: 'sankey',\\n              data: data.nodes,\\n              links: data.links,\\n              emphasis: {\\n                focus: 'adjacency'\\n              },\\n              levels: [\\n                {\\n                  depth: 0,\\n                  itemStyle: {\\n                    color: '#fbb4ae'\\n                  },\\n                  lineStyle: {\\n                    color: 'source',\\n                    opacity: 0.6\\n                  }\\n                },\\n                {\\n                  depth: 1,\\n                  itemStyle: {\\n                    color: '#b3cde3'\\n                  },\\n                  lineStyle: {\\n                    color: 'source',\\n                    opacity: 0.6\\n                  }\\n                },\\n                {\\n                  depth: 2,\\n                  itemStyle: {\\n                    color: '#ccebc5'\\n                  },\\n                  lineStyle: {\\n                    color: 'source',\\n                    opacity: 0.6\\n                  }\\n                },\\n                {\\n                  depth: 3,\\n                  itemStyle: {\\n                    color: '#decbe4'\\n                  },\\n                  lineStyle: {\\n                    color: 'source',\\n                    opacity: 0.6\\n                  }\\n                }\\n              ],\\n              lineStyle: {\\n                curveness: 0.5\\n              }\\n            }\\n          ]\\n        })\\n      );\\n      \\n      option && myChart.setOption(option);\\n    });\\n}\\n})\",\"multiquerydsl\":\"\"}}"},"id":"93b42230-3c7c-11ec-834b-d3680dc5ae92","migrationVersion":{"visualization":"7.10.0"},"references":[],"type":"visualization","updated_at":"2023-01-04T14:29:00.652Z","version":"WzIxLDVd"}
{"exportedCount":1,"missingRefCount":0,"missingReferences":[]}