{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"[eCommerce] Markdown","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"[eCommerce] Markdown\",\"type\":\"markdown\",\"params\":{\"fontSize\":12,\"openLinksInNewTab\":false,\"markdown\":\"### Sample eCommerce Data\\nThis dashboard contains sample data for you to play with. You can view it, search it, and interact with the visualizations. For more information about OpenSearch Dashboards, check our [docs](https://github.com/opensearch-project).\"},\"aggs\":[]}"},"id":"09ffee60-b88c-11e8-a6d9-e546fe2bba5f","migrationVersion":{"visualization":"7.10.0"},"references":[],"type":"visualization","updated_at":"2021-10-29T15:18:59.228Z","version":"WzMsMl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}"},"title":"sample_saveCSVToOpensearch","uiStateJSON":"{}","version":1,"visState":"{\"aggs\":[],\"params\":{\"dimensions\":{\"metric\":[]},\"formula\":\"<div class=\\\"container\\\">\\n  <div class=\\\"jumbotron\\\">\\n    <h1>Import CSV file</h1>\\n    <p>You can import any csv file (separator is ';'). Only the first 100 rows will be shown when using the view button.</p>\\n    <p>Opensearch auto-detection is enabled for numeric and date fields</p>\\n  </div>\\n\\n  <div class=\\\"alert alert-success d-none\\\" role=\\\"alert\\\" id=\\\"alert\\\">\\n    <h4 class=\\\"alert-heading\\\">Data saved to Opensearch</h4>\\n    <p>The data is being loaded into Opensearch. Depending on the size of the CSV file, it might take some time.</p>\\n  </div>\\n\\n  <div class=\\\"alert alert-danger d-none\\\" role=\\\"alert\\\" id=\\\"alertIndexExist\\\">\\n    <h4 class=\\\"alert-heading\\\">Index already exists in Opensearch</h4>\\n    <p>When given by the user, the index name should not exist. If you need to use an existing index, please select it from the dropdown list</p>\\n  </div>\\n\\n    <div id=\\\"selectFile\\\" class=\\\"form-group\\\">\\n      <input type=\\\"file\\\" class=\\\"form-control-file\\\" id=\\\"fileUpload\\\" />\\n    </div>\\n    \\n    <div class=\\\"form-group\\\">\\n      <button id=\\\"view\\\" class=\\\"btn btn-primary d-none\\\">View</button>\\n      <button id=\\\"upload\\\" class=\\\"btn btn-primary d-none\\\">Upload</button>\\n    </div>\\n\\n    <div id=\\\"selectIndex\\\" class=\\\"form-group d-none\\\">\\n      <label>Choose destination index</label>\\n    </div>\\n    \\n    <div id=\\\"createIndex\\\"  class=\\\"form-group d-none\\\">\\n      <label for=\\\"index\\\">Opensearch index</label>\\n      <input id=\\\"createIndexValue\\\" value=\\\"myindex\\\" class=\\\"form-control\\\" />\\n    </div>\\n    \\n    <div class=\\\"form-group\\\">\\n      <button id=\\\"save2es\\\" class=\\\"btn btn-success d-none\\\">Save to Opensearch</button>\\n    </div>\\n  <hr />\\n  <div id=\\\"displayCSV\\\"></div>\\n\\n  \\n</div>\\n\\n<!-- CSS only -->\\n<link rel=\\\"stylesheet\\\" href=\\\"https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css\\\" integrity=\\\"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk\\\" crossorigin=\\\"anonymous\\\">\\n<link rel=\\\"stylesheet\\\" href=\\\"https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css\\\">\\n\",\"meta\":\"({\\n\\t/*\\n\\tPrerequisites\\n\\t  kibana advanced settings\\n  \\t\\tStore URLs in session storage set to true (URL is too big)\\n  \\topensearch_dashboards.yml\\n\\t\\t  server.cors: true\\n\\t  opensearch.yml\\n  \\t\\thttp.cors.enabled : true\\n\\t\\t  // To be changed if used in prod env\\n\\t\\t  http.cors.allow-origin: \\\"*\\\"\\n\\t\\t  http.cors.allow-methods : OPTIONS, HEAD, GET, POST, PUT, DELETE\\n\\t\\t  http.cors.allow-headers: \\\"kbn-version, Origin, X-Requested-With, Content-Type, Accept, Engaged-Auth-Token\\\"\\n\\t\\t  // If basic auth is usedhttp.cors.allow-headers: \\\"kbn-version, Origin, X-Requested-With, Content-Type, Accept, Engaged-Auth-Token Authorization\\\"\\n  Configuration\\n    Change os variables values (host, user and password) if not using Opensearch in a localhost env\\n\\t */\\n\\t\\n\\timport: function() {\\n\\t\\t$.getScript(\\\"https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js\\\")\\n\\t\\t\\t.done(function (script, textStatus) {\\n\\n\\t\\t\\t\\t\\t// os variables\\n\\t\\t\\t\\t\\t// Do not forget trailing /\\n\\t\\t\\t\\t\\t//---------------------------------------------------------------------\\n\\t\\t\\t\\t\\tconst os_host = \\\"https://localhost:9200/\\\";\\n\\t\\t\\t\\t\\t// If basic auth, please change both variables below\\n\\t\\t\\t\\t\\tconst os_user = \\\"admin\\\";\\n\\t\\t\\t\\t\\tconst os_password = \\\"admin\\\";\\n\\t\\t\\t\\t\\t//---------------------------------------------------------------------\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t// Function used to normalize column names\\n\\t\\t\\t\\t\\t// Input:\\n\\t\\t\\t\\t\\t//\\tcolumn_name: name of the column to normalize\\n\\t\\t\\t\\t\\t// Return:\\n\\t\\t\\t\\t\\t//\\tThe new normalized column name\\n\\t\\t\\t\\t\\tfunction normalize(column_name) {\\n\\t\\t\\t\\t\\t\\tconst to_remove = '!\\\"#$%&\\\\'()*+,-./:;<=>?@[\\\\\\\\]^`{|}~ ';\\n\\t\\t\\t\\t\\t\\tconst regex = new RegExp('[' + to_remove + ']', 'g');\\n\\t\\t\\t\\t\\t\\tlet removed =  column_name.replace(regex, '_');\\n\\t\\t\\t\\t\\t\\tconst map = {\\n\\t\\t\\t\\t\\t\\t\\t\\t'a' : 'á|à|ã|â|À|Á|Ã|Â',\\n\\t\\t\\t\\t\\t\\t\\t\\t'e' : 'é|è|ê|É|È|Ê',\\n\\t\\t\\t\\t\\t\\t\\t\\t'i' : 'í|ì|î|Í|Ì|Î',\\n\\t\\t\\t\\t\\t\\t\\t\\t'o' : 'ó|ò|ô|õ|Ó|Ò|Ô|Õ',\\n\\t\\t\\t\\t\\t\\t\\t\\t'u' : 'ú|ù|û|ü|Ú|Ù|Û|Ü',\\n\\t\\t\\t\\t\\t\\t\\t\\t'c' : 'ç|Ç',\\n\\t\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\tlet str = removed.toLowerCase();\\n    \\n\\t\\t\\t\\t\\t\\tfor (let pattern in map) {\\n\\t\\t\\t\\t\\t\\t\\tstr = str.replace(new RegExp(map[pattern], 'g'), pattern);\\n\\t\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t\\t\\treturn str;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t// Function to read indices from Opensearch\\n\\t\\t\\t\\t\\t// Return: \\n\\t\\t\\t\\t\\t//\\tresponse form query\\n\\t\\t\\t\\t\\tfunction getIndicesListFromOpensearch() {\\n\\t\\t\\t\\t\\t\\t// Get indices from es\\n\\t\\t\\t\\t\\t\\tlet indices = $.ajax({\\n\\t\\t\\t\\t\\t\\t\\ttype: \\\"GET\\\",\\n\\t\\t\\t\\t\\t\\t\\tbeforeSend: function (request) {\\n\\t\\t\\t\\t\\t\\t\\t\\trequest.setRequestHeader(\\\"Authorization\\\", \\\"Basic \\\" + btoa(os_user + \\\":\\\" + os_password));\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\turl: os_host + \\\"_cat/indices?format=json&s=index\\\",\\n\\t\\t\\t\\t\\t\\t\\tcontentType: 'application/json',\\n\\t\\t\\t\\t\\t\\t\\tcrossDomain: true,\\n\\t\\t\\t\\t\\t\\t\\tasync: false,\\n\\t\\t\\t\\t\\t\\t\\tdataType: 'json'\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\treturn indices;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t// Function to load data into Opensearch\\n\\t\\t\\t\\t\\t// Input: \\n\\t\\t\\t\\t\\t//\\tos_index: index name to load data into\\n\\t\\t\\t\\t\\t//\\tpayload: data to be saved\\n\\t\\t\\t\\t\\tfunction loadBulkData(os_index, payload) {\\n\\t\\t\\t\\t\\t\\t$.ajax({\\n\\t\\t\\t\\t\\t\\t\\ttype: \\\"POST\\\",\\n\\t\\t\\t\\t\\t\\t\\tdata: payload + \\\"\\\\n\\\",\\n\\t\\t\\t\\t\\t\\t\\tbeforeSend: function (request) {\\n\\t\\t\\t\\t\\t\\t\\t\\trequest.setRequestHeader(\\\"Authorization\\\", \\\"Basic \\\" + btoa(os_user + \\\":\\\" + os_password));\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\turl: os_host + os_index + \\\"/_bulk?refresh\\\",\\n\\t\\t\\t\\t\\t\\t\\tcontentType: 'application/json',\\n\\t\\t\\t\\t\\t\\t\\tcrossDomain: true,\\n\\t\\t\\t\\t\\t\\t\\tsuccess: function (data, textStatus, jqXHR) {\\n\\t\\t\\t\\t\\t\\t\\t\\tconsole.log(textStatus + \\\": \\\" + jqXHR.status);\\n\\t\\t\\t\\t\\t\\t\\t\\t$(alert_display).removeClass('d-none');\\n\\t\\t\\t\\t\\t\\t\\t\\t$(alertIndexExist).addClass('d-none');\\n\\t\\t\\t\\t\\t\\t\\t\\t// do something with data\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\terror: function (jqXHR, textStatus, errorThrown) {\\n\\t\\t\\t\\t\\t\\t\\t\\tconsole.log(textStatus + \\\": \\\" + jqXHR.status + \\\" \\\" + errorThrown);\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\tdataType: 'json'\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t// Function to put default mapping into Opensearch\\n\\t\\t\\t\\t\\t// Date and numeric detection\\n\\t\\t\\t\\t\\tfunction putEsDefaultMapping(os_index) {\\n\\t\\t\\t\\t\\t\\tconst mapping = `{\\n\\t\\t\\t\\t\\t            \\\"mappings\\\": {\\n\\t\\t\\t\\t\\t              \\\"date_detection\\\": true,\\n\\t\\t\\t\\t\\t              \\\"numeric_detection\\\": true\\n\\t\\t\\t\\t\\t            }\\n\\t\\t\\t\\t\\t          }`\\n\\t\\t\\t\\t\\t\\t$.ajax({\\n\\t\\t\\t\\t\\t\\t\\ttype: \\\"PUT\\\",\\n\\t\\t\\t\\t\\t\\t\\tdata: mapping,\\n\\t\\t\\t\\t\\t\\t\\tbeforeSend: function (request) {\\n\\t\\t\\t\\t\\t\\t\\t\\trequest.setRequestHeader(\\\"Authorization\\\", \\\"Basic \\\" + btoa(os_user + \\\":\\\" + os_password));\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\turl: os_host + os_index,\\n\\t\\t\\t\\t\\t\\t\\tcontentType: 'application/json',\\n\\t\\t\\t\\t\\t\\t\\tcrossDomain: true,\\n\\t\\t\\t\\t\\t\\t\\tasync: false,\\n\\t\\t\\t\\t\\t\\t\\tdataType: 'json'\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t// Function to check if an index already exists in Opensearch\\n\\t\\t\\t\\t\\t// Input: \\n\\t\\t\\t\\t\\t//\\tos_index: index name to load data into\\n\\t\\t\\t\\t\\t// Return:\\n\\t\\t\\t\\t\\t//\\thttps tatus code (200 if index is found, 404 otherwise)\\n\\t\\t\\t\\t\\tfunction checkIndexExists(os_index) {\\n\\t\\t\\t\\t\\t\\tlet http_status;\\n\\t\\t\\t\\t\\t\\t$.ajax({\\n\\t\\t\\t\\t\\t\\t\\ttype: \\\"HEAD\\\",\\n\\t\\t\\t\\t\\t\\t\\turl: os_host + os_index,\\n\\t\\t\\t\\t\\t\\t\\tcrossDomain: true,\\n\\t\\t\\t\\t\\t\\t\\tbeforeSend: function (request) {\\n\\t\\t\\t\\t\\t\\t\\t\\trequest.setRequestHeader(\\\"Authorization\\\", \\\"Basic \\\" + btoa(os_user + \\\":\\\" + os_password));\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\tasync: false,\\n\\t\\t\\t\\t\\t\\t\\tsuccess: function (data, textStatus, jqXHR) {\\n\\t\\t\\t\\t\\t\\t\\t\\tconsole.log(textStatus + \\\": \\\" + jqXHR.status);\\n\\t\\t\\t\\t\\t\\t\\t\\thttp_status = jqXHR.status;\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\terror: function (jqXHR, textStatus, errorThrown) {\\n\\t\\t\\t\\t\\t\\t\\t\\tconsole.log(textStatus + \\\": \\\" + jqXHR.status + \\\" \\\" + errorThrown);\\n\\t\\t\\t\\t\\t\\t\\t\\thttp_status = jqXHR.status;\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\treturn http_status;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t// Function to read the csv file and depending on the procss to perform\\n\\t\\t\\t\\t\\t// either display csv content as a table or load data into ES\\n\\t\\t\\t\\t\\tfunction readCsvFile(display_or_save, csv_file, os_index) {\\n\\t\\t\\t\\t\\t\\t// Input: \\n\\t\\t\\t\\t\\t\\t//\\tdisplay_or_save: values can be \\\"display\\\" or \\\"save\\\", display to display csv content as a an html table or \\\"save\\\" to load data into ES\\n\\t\\t\\t\\t\\t\\t//\\tcsv_file: csv file read from disk\\n\\t\\t\\t\\t\\t\\t//\\tos_index: index name to load data into\\n\\t\\t\\t\\t\\t\\tlet nb_fields;\\n\\t\\t\\t\\t\\t\\tlet final_result = '';\\n\\t\\t\\t\\t\\t\\tlet os_index_json = \\\"{ \\\\\\\"index\\\\\\\":{ } }\\\\n\\\";\\n\\t\\t\\t\\t\\t\\t// Regex for input filename\\n\\t\\t\\t\\t\\t\\tconst regex_filename = /^([a-zA-Z0-9\\\\s_\\\\\\\\.\\\\-:])+(.csv|.txt)$/;\\n\\t\\t\\t\\t\\t\\t// csv separator\\n\\t\\t\\t\\t\\t\\tconst csv_separator = ';';\\n\\n\\t\\t\\t\\t\\t\\tif (regex_filename.test(csv_file.name.toLowerCase())) {\\n\\t\\t\\t\\t\\t\\t\\tif (typeof (FileReader) != \\\"undefined\\\") {\\n\\t\\t\\t\\t\\t\\t\\t\\tlet reader = new FileReader();\\n\\t\\t\\t\\t\\t\\t\\t\\tlet headers;\\n\\t\\t\\t\\t\\t\\t\\t\\tlet nb_fields;\\n\\t\\t\\t\\t\\t            let table = document.createElement(\\\"table\\\"); \\n\\t\\t\\t\\t\\t            reader.onload = function (e) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tlet rows = e.target.result.split(\\\"\\\\n\\\");\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t// Display the first 10 lines\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tlet rows2display = rows.length;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif (rows.length > 100 && display_or_save == \\\"display\\\") {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\trows2display = 100;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tlet header_html;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tfor (let i = 0; i < rows2display; i++) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif (typeof rows[i] != 'undefined') {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tlet cells = rows[i].split(csv_separator);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif (i == 0) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\theaders = cells;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tnb_fields = headers.length;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t// Build html table and table header\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t            $(table).addClass(\\\"display\\\");\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t            $(table).prop('id', 'viewTableId');\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t            header_html = '<thead><tr>';\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfor (let header of headers) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\theader_html += '<td>' + normalize(header) + '</td>';\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\theader_html += '</tr></thead>'\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif (cells.length == nb_fields) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif (display_or_save == \\\"display\\\") {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t// Build table content\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tvar row = table.insertRow(-1);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfor (let j = 0; j < cells.length; j++) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tlet cell = row.insertCell(-1);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tlet number = parseFloat(cells[j].replace(',','.')).toFixed(2);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tlet final_value;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif (!isNaN(number) && cells[j].includes(\\\",\\\")) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t  final_value = number;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t  final_value = cells[j];\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcell.innerHTML = final_value.replace(/\\\"/g, '');\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t// Build payload for bulk API\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tlet obj = {};\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfor (let j = 0; j < nb_fields; j++) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t  let number = parseFloat(cells[j].replace(',','.')).toFixed(2);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t  let final_value;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif (!isNaN(number) && cells[j].includes(\\\",\\\")) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t  final_value = number;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t  final_value = cells[j];\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tobj[headers[j].replace(/\\\"/g, '').toLowerCase()] = final_value.replace(/\\\"/g, '');\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfinal_result = final_result.concat(os_index_json);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfinal_result = final_result.concat(JSON.stringify(obj) + \\\"\\\\n\\\");\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif (display_or_save == \\\"display\\\") {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t// Display table\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$(display).html('');\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$(display).append(table);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$(table).append(header_html);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$(table).DataTable();\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t// Load to os_index\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tloadBulkData(os_index, final_result);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\treader.readAsText(csv_file);\\n\\t\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\t\\talert(\\\"This browser does not support HTML5.\\\");\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\talert(\\\"Please upload a valid CSV file.\\\");\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t// Get shadow DOM elements\\n\\t\\t\\t\\t\\tlet fileUpload;\\n\\t\\t\\t\\t\\tlet upload;\\n\\t\\t\\t\\t\\tlet display;\\n\\t\\t\\t\\t\\tlet selectIndex;\\n\\t\\t\\t\\t\\tlet view;\\n\\t\\t\\t\\t\\tlet createIndex;\\n\\t\\t\\t\\t\\tlet createIndexValue;\\n\\t\\t\\t\\t\\tlet save2es;\\n\\t\\t\\t\\t\\tlet alert_display;\\n\\t\\t\\t\\t\\tlet alertIndexExist;\\n\\t\\t\\t\\t\\tlet shadow;\\n\\t\\t\\t\\t\\tconst elements = $('.output-vis');\\n\\t\\t\\t\\t\\tfor (let elem of elements) {\\n\\t\\t\\t\\t\\t\\tshadow = elem.shadowRoot;\\n\\t\\t\\t\\t\\t\\tfileUpload = $(shadow).find(\\\"#fileUpload\\\");\\n\\t\\t\\t\\t\\t\\tupload = $(shadow).find(\\\"#upload\\\");\\n\\t\\t\\t\\t\\t\\tdisplay = $(shadow).find(\\\"#displayCSV\\\");\\n\\t\\t\\t\\t\\t\\tselectIndex = $(shadow).find(\\\"#selectIndex\\\");\\n\\t\\t\\t\\t\\t\\tview = $(shadow).find(\\\"#view\\\");\\n\\t\\t\\t\\t\\t\\tcreateIndex = $(shadow).find(\\\"#createIndex\\\");\\n\\t\\t\\t\\t\\t\\tsave2es = $(shadow).find(\\\"#save2es\\\");\\n\\t\\t\\t\\t\\t\\tcreateIndexValue = $(shadow).find(\\\"#createIndexValue\\\");\\n\\t\\t\\t\\t\\t\\talert_display = $(shadow).find(\\\"#alert\\\");\\n\\t\\t\\t\\t\\t\\talertIndexExist = $(shadow).find(\\\"#alertIndexExist\\\");\\n\\t\\t\\t\\t\\t\\tif ($(fileUpload).length > 0) {\\n\\t\\t\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t// Change event to manage file change made by user\\n\\t\\t\\t\\t\\t$(fileUpload).change(function () {\\n\\t\\t\\t\\t\\t\\t$(display).html('');\\n\\t\\t\\t\\t\\t\\tlet file2Upload = $(fileUpload).prop('files')[0];\\n\\t\\t\\t\\t\\t\\tif (typeof file2Upload == 'undefined') {\\n\\t\\t\\t\\t\\t\\t\\t$(view).addClass('d-none');\\n\\t\\t\\t\\t\\t\\t\\t$(upload).addClass('d-none');\\n\\t\\t\\t\\t\\t\\t\\t$(selectIndex).addClass('d-none');\\n\\t\\t\\t\\t\\t\\t\\t$(createIndex).addClass('d-none');\\n\\t\\t\\t\\t\\t\\t\\t$(alert_display).addClass('d-none');\\n\\t\\t\\t\\t\\t\\t\\t$(alertIndexExist).addClass('d-none');\\n\\t\\t\\t\\t\\t\\t\\t$(save2es).addClass('d-none');\\n\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\t$(selectIndex).addClass('d-none');\\n\\t\\t\\t\\t\\t\\t\\t$(createIndex).addClass('d-none');\\n\\t\\t\\t\\t\\t\\t\\t$(alert_display).addClass('d-none');\\n\\t\\t\\t\\t\\t\\t\\t$(save2es).addClass('d-none');\\n\\t\\t\\t\\t\\t\\t\\t(alertIndexExist).addClass('d-none');\\n\\t\\t\\t\\t\\t\\t\\t$(view).removeClass('d-none');\\n\\t\\t\\t\\t\\t\\t\\t$(upload).removeClass('d-none');\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t})\\n\\n\\t\\t\\t\\t\\t// Click event to view CSV content within a datatable\\n\\t\\t\\t\\t\\t$(view).click(function () {\\n\\t\\t\\t\\t\\t\\tlet file2Upload = $(fileUpload).prop('files')[0];\\n\\t\\t\\t\\t\\t\\treadCsvFile(\\\"display\\\", file2Upload);\\n\\t\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\t\\t// Click event to display candidate ES indices\\n\\t\\t\\t\\t\\t$(upload).click(function () {\\n\\t\\t\\t\\t\\t\\t// Get indices\\n\\t\\t\\t\\t\\t\\tconst indices = getIndicesListFromOpensearch();\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t// Add select index\\n\\t\\t\\t\\t\\t\\tlet indices_arr = JSON.parse(indices.responseText);\\n\\t\\t\\t\\t\\t\\tlet indices_choice = [ 'Select index', '-- Create new index --' ];\\n\\t\\t\\t\\t\\t\\tfor (let os_index of indices_arr) {\\n\\t\\t\\t\\t\\t\\t\\tif (os_index.index.charAt(0) != '.') {\\n\\t\\t\\t\\t\\t\\t\\t\\tindices_choice.push(os_index.index);\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t//Create and append select list\\n\\t\\t\\t\\t\\t\\tlet selectList = document.createElement(\\\"select\\\");\\n\\t\\t\\t\\t\\t\\tselectList.id = \\\"selectListId\\\";\\n\\t\\t\\t\\t\\t\\tlet select_exist = $(shadow).find('#selectListId');\\n\\t\\t\\t\\t\\t\\tif (!$(select_exist).length > 0) {\\n\\t\\t\\t\\t\\t\\t\\t$(selectIndex).append(selectList);\\n\\t\\t\\t\\t\\t\\t\\tselect_exist = $(shadow).find('#selectListId');\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t// Create and append the options\\n\\t\\t\\t\\t\\t\\t$(select_exist).empty();\\n\\t\\t\\t\\t\\t\\tfor (let i = 0; i < indices_choice.length; i++) {\\n\\t\\t\\t\\t\\t\\t\\tlet option = document.createElement(\\\"option\\\");\\n\\t\\t\\t\\t\\t\\t\\toption.value = indices_choice[i];\\n\\t\\t\\t\\t\\t\\t\\toption.text = indices_choice[i];\\n\\t\\t\\t\\t\\t\\t\\t$(select_exist).append(option);\\n\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t        let default_option = $(shadow).find('#selectListId option[value=\\\"Select index\\\"]');\\n\\t\\t\\t\\t        $(createIndex).addClass('d-none');\\n\\t\\t\\t\\t        $(save2es).addClass('d-none');\\n\\t\\t\\t\\t        $(selectIndex).val(\\\"Select index\\\").change();\\n\\t\\t\\t\\t        $(default_option).prop('selected', true);\\n\\t\\t\\t\\t        $(selectIndex).removeClass('d-none');\\n\\t\\t\\t\\t        \\n\\t\\t\\t\\t        $(select_exist).unbind();\\n\\t\\t\\t\\t        $(select_exist).change(function() {\\n\\t\\t\\t\\t          if (this.value == 'Select index') {\\n\\t\\t\\t\\t            $(save2es).addClass('d-none');\\n\\t\\t\\t\\t          } else {\\n\\t\\t\\t\\t            $(save2es).removeClass('d-none');\\n\\t\\t\\t\\t          }\\n\\t\\t\\t\\t          if (this.value == '-- Create new index --') {\\n\\t\\t\\t\\t            $(createIndex).removeClass('d-none');\\n\\t\\t\\t\\t          } else {\\n\\t\\t\\t\\t            $(createIndex).addClass('d-none');\\n\\t\\t\\t\\t          }\\n\\t\\t\\t\\t        });\\n\\t\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\t\\t// Click event to save data into ES\\n\\t\\t\\t\\t\\t$(save2es).click(function () {\\n\\n\\t\\t\\t\\t\\t\\tconst selected_option = $(shadow).find('#selectListId :selected');\\n\\t\\t\\t\\t\\t\\tlet index_name;\\n\\n\\t\\t\\t\\t\\t\\tif ($(selected_option).text() == '-- Create new index --') {\\n\\t\\t\\t\\t\\t\\t\\t// New index\\n\\t\\t\\t\\t\\t\\t\\tindex_name = $(shadow).find('#createIndexValue').val().toLowerCase();\\n\\n\\t\\t\\t\\t\\t\\t\\t// Check first if index already exists\\n\\t\\t\\t\\t\\t\\t\\tconst return_code = checkIndexExists(index_name);\\n\\n\\t\\t\\t\\t\\t\\t\\t// If index already exist, dipslay error message and get out\\n\\t\\t\\t\\t\\t\\t\\tif (return_code == 200) {\\n\\t\\t\\t\\t\\t\\t\\t\\t$(alertIndexExist).removeClass('d-none');\\n\\t\\t\\t\\t\\t\\t\\t\\t$(alert_display).addClass('d-none');\\n\\t\\t\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t// Else, index exists, then put default mapping\\n\\t\\t\\t\\t\\t\\t\\tputEsDefaultMapping(index_name);\\n\\n\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\tindex_name = $(shadow).find('#selectListId :selected').val();\\n\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t// Prepare payload for BULK request\\n\\t\\t\\t\\t\\t\\tconst file2Upload = $(fileUpload).prop('files')[0];\\n\\t\\t\\t\\t\\t\\treadCsvFile(\\\"save\\\", file2Upload, index_name);\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t        $(createIndex).addClass('d-none');\\n\\t\\t\\t\\t        $(save2es).addClass('d-none');\\n\\t\\t\\t\\t        $(selectIndex).addClass('d-none');\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t});\\n\\t}\\n});\",\"multiquerydsl\":\"{\\n\\n}\"},\"title\":\"sample_saveCSVToOpensearch\",\"type\":\"transform\"}"},"id":"0a9431e0-c6a1-11ea-a9e6-4d54a41e5ec8","migrationVersion":{"visualization":"7.10.0"},"references":[],"type":"visualization","updated_at":"2021-10-29T15:21:55.459Z","version":"WzE4LDJd"}
{"attributes":{"buildNum":36526,"defaultIndex":"ff959d40-b880-11e8-a6d9-e546fe2bba5f","state:storeInSessionStorage":true},"id":"1.1.0","migrationVersion":{"config":"7.9.0"},"references":[],"type":"config","updated_at":"2021-10-29T15:20:52.209Z","version":"WzE3LDJd"}
{"attributes":{"fieldFormatMap":"{\"taxful_total_price\":{\"id\":\"number\",\"params\":{\"pattern\":\"$0,0.[00]\"}}}","fields":"[{\"name\":\"_id\",\"type\":\"string\",\"esTypes\":[\"_id\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":false},{\"name\":\"_index\",\"type\":\"string\",\"esTypes\":[\"_index\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":false},{\"name\":\"_score\",\"type\":\"number\",\"count\":0,\"scripted\":false,\"searchable\":false,\"aggregatable\":false,\"readFromDocValues\":false},{\"name\":\"_source\",\"type\":\"_source\",\"esTypes\":[\"_source\"],\"count\":0,\"scripted\":false,\"searchable\":false,\"aggregatable\":false,\"readFromDocValues\":false},{\"name\":\"_type\",\"type\":\"string\",\"esTypes\":[\"_type\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":false},{\"name\":\"category\",\"type\":\"string\",\"esTypes\":[\"text\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":false,\"readFromDocValues\":false},{\"name\":\"category.keyword\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true,\"subType\":{\"multi\":{\"parent\":\"category\"}}},{\"name\":\"currency\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"customer_birth_date\",\"type\":\"date\",\"esTypes\":[\"date\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"customer_first_name\",\"type\":\"string\",\"esTypes\":[\"text\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":false,\"readFromDocValues\":false},{\"name\":\"customer_first_name.keyword\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true,\"subType\":{\"multi\":{\"parent\":\"customer_first_name\"}}},{\"name\":\"customer_full_name\",\"type\":\"string\",\"esTypes\":[\"text\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":false,\"readFromDocValues\":false},{\"name\":\"customer_full_name.keyword\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true,\"subType\":{\"multi\":{\"parent\":\"customer_full_name\"}}},{\"name\":\"customer_gender\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"customer_id\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"customer_last_name\",\"type\":\"string\",\"esTypes\":[\"text\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":false,\"readFromDocValues\":false},{\"name\":\"customer_last_name.keyword\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true,\"subType\":{\"multi\":{\"parent\":\"customer_last_name\"}}},{\"name\":\"customer_phone\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"day_of_week\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"day_of_week_i\",\"type\":\"number\",\"esTypes\":[\"integer\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"email\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"event.dataset\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"geoip.city_name\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"geoip.continent_name\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"geoip.country_iso_code\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"geoip.location\",\"type\":\"geo_point\",\"esTypes\":[\"geo_point\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"geoip.region_name\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"manufacturer\",\"type\":\"string\",\"esTypes\":[\"text\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":false,\"readFromDocValues\":false},{\"name\":\"manufacturer.keyword\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true,\"subType\":{\"multi\":{\"parent\":\"manufacturer\"}}},{\"name\":\"order_date\",\"type\":\"date\",\"esTypes\":[\"date\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"order_id\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"products._id\",\"type\":\"string\",\"esTypes\":[\"text\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":false,\"readFromDocValues\":false},{\"name\":\"products._id.keyword\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true,\"subType\":{\"multi\":{\"parent\":\"products._id\"}}},{\"name\":\"products.base_price\",\"type\":\"number\",\"esTypes\":[\"half_float\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"products.base_unit_price\",\"type\":\"number\",\"esTypes\":[\"half_float\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"products.category\",\"type\":\"string\",\"esTypes\":[\"text\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":false,\"readFromDocValues\":false},{\"name\":\"products.category.keyword\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true,\"subType\":{\"multi\":{\"parent\":\"products.category\"}}},{\"name\":\"products.created_on\",\"type\":\"date\",\"esTypes\":[\"date\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"products.discount_amount\",\"type\":\"number\",\"esTypes\":[\"half_float\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"products.discount_percentage\",\"type\":\"number\",\"esTypes\":[\"half_float\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"products.manufacturer\",\"type\":\"string\",\"esTypes\":[\"text\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":false,\"readFromDocValues\":false},{\"name\":\"products.manufacturer.keyword\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true,\"subType\":{\"multi\":{\"parent\":\"products.manufacturer\"}}},{\"name\":\"products.min_price\",\"type\":\"number\",\"esTypes\":[\"half_float\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"products.price\",\"type\":\"number\",\"esTypes\":[\"half_float\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"products.product_id\",\"type\":\"number\",\"esTypes\":[\"long\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"products.product_name\",\"type\":\"string\",\"esTypes\":[\"text\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":false,\"readFromDocValues\":false},{\"name\":\"products.product_name.keyword\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true,\"subType\":{\"multi\":{\"parent\":\"products.product_name\"}}},{\"name\":\"products.quantity\",\"type\":\"number\",\"esTypes\":[\"integer\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"products.sku\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"products.tax_amount\",\"type\":\"number\",\"esTypes\":[\"half_float\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"products.taxful_price\",\"type\":\"number\",\"esTypes\":[\"half_float\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"products.taxless_price\",\"type\":\"number\",\"esTypes\":[\"half_float\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"products.unit_discount_amount\",\"type\":\"number\",\"esTypes\":[\"half_float\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"sku\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"taxful_total_price\",\"type\":\"number\",\"esTypes\":[\"half_float\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"taxless_total_price\",\"type\":\"number\",\"esTypes\":[\"half_float\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"total_quantity\",\"type\":\"number\",\"esTypes\":[\"integer\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"total_unique_products\",\"type\":\"number\",\"esTypes\":[\"integer\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"type\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true},{\"name\":\"user\",\"type\":\"string\",\"esTypes\":[\"keyword\"],\"count\":0,\"scripted\":false,\"searchable\":true,\"aggregatable\":true,\"readFromDocValues\":true}]","timeFieldName":"order_date","title":"opensearch_dashboards_sample_data_ecommerce"},"id":"ff959d40-b880-11e8-a6d9-e546fe2bba5f","migrationVersion":{"index-pattern":"7.6.0"},"references":[],"type":"index-pattern","updated_at":"2021-10-29T15:18:59.228Z","version":"WzEzLDJd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"[eCommerce] Total Revenue","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"[eCommerce] Total Revenue\",\"type\":\"metric\",\"params\":{\"addTooltip\":true,\"addLegend\":false,\"type\":\"metric\",\"metric\":{\"percentageMode\":false,\"useRanges\":false,\"colorSchema\":\"Green to Red\",\"metricColorMode\":\"None\",\"colorsRange\":[{\"from\":0,\"to\":10000}],\"labels\":{\"show\":false},\"invertColors\":false,\"style\":{\"bgFill\":\"#000\",\"bgColor\":false,\"labelColor\":false,\"subText\":\"\",\"fontSize\":36}}},\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"sum\",\"schema\":\"metric\",\"params\":{\"field\":\"taxful_total_price\",\"customLabel\":\"Total Revenue\"}}]}"},"id":"10f1a240-b891-11e8-a6d9-e546fe2bba5f","migrationVersion":{"visualization":"7.10.0"},"references":[{"id":"ff959d40-b880-11e8-a6d9-e546fe2bba5f","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-10-29T15:18:59.228Z","version":"WzYsMl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"sample_sankey","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"sample_sankey\",\"type\":\"transform\",\"aggs\":[],\"params\":{\"meta\":\"({\\nafter_render: function() {\\n    $.when(\\n        $.getScript(\\\"https://d3js.org/d3.v4.min.js\\\"),\\n        $.getScript(\\\"https://cdn.jsdelivr.net/gh/holtzy/D3-graph-gallery@master/LIB/sankey.js\\\"),\\n        $.Deferred(function(deferred) {\\n            $(deferred.resolve);\\n        })\\n    ).done(function() {\\n\\n            // Get decion tree location from shadow DOM\\n            let sankeyLocation;\\n            const elements = $('.output-vis');\\n            let shadow;\\n            for (let elem of elements) {\\n                shadow = elem.shadowRoot;\\n                sankeyLocation = $(shadow).find(\\\"#dataView\\\");\\n                if ($(sankeyLocation).length > 0) {\\n                    break;\\n                }\\n            }\\n\\n            // Remove children to avoid multiple graphs\\n            $(sankeyLocation).empty();\\n\\n            // TO BE CHANGED set data\\n            const myData = `{\\n\\\"nodes\\\":[\\n{\\\"node\\\":0,\\\"name\\\":\\\"node0\\\"},\\n{\\\"node\\\":1,\\\"name\\\":\\\"node1\\\"},\\n{\\\"node\\\":2,\\\"name\\\":\\\"node2\\\"},\\n{\\\"node\\\":3,\\\"name\\\":\\\"node3\\\"},\\n{\\\"node\\\":4,\\\"name\\\":\\\"node4\\\"}\\n],\\n\\\"links\\\":[\\n{\\\"source\\\":0,\\\"target\\\":2,\\\"value\\\":2},\\n{\\\"source\\\":1,\\\"target\\\":2,\\\"value\\\":2},\\n{\\\"source\\\":1,\\\"target\\\":3,\\\"value\\\":2},\\n{\\\"source\\\":0,\\\"target\\\":4,\\\"value\\\":2},\\n{\\\"source\\\":2,\\\"target\\\":3,\\\"value\\\":2},\\n{\\\"source\\\":2,\\\"target\\\":4,\\\"value\\\":2},\\n{\\\"source\\\":3,\\\"target\\\":4,\\\"value\\\":4}\\n]}`;\\n\\n            // set the dimensions and margins of the graph\\n            var margin = {\\n                    top: 10,\\n                    right: 10,\\n                    bottom: 10,\\n                    left: 10\\n                },\\n                width = 450 - margin.left - margin.right,\\n                height = 480 - margin.top - margin.bottom;\\n\\n            // append the svg object to the body of the page\\n            var svg = d3.select(sankeyLocation[0]).append(\\\"svg\\\")\\n                .attr(\\\"width\\\", width + margin.left + margin.right)\\n                .attr(\\\"height\\\", height + margin.top + margin.bottom)\\n                .append(\\\"g\\\")\\n                .attr(\\\"transform\\\",\\n                    \\\"translate(\\\" + margin.left + \\\",\\\" + margin.top + \\\")\\\");\\n\\n            // Color scale used\\n            var color = d3.scaleOrdinal(d3.schemeCategory20);\\n\\n            // Set the sankey diagram properties\\n            var sankey = d3.sankey()\\n                .nodeWidth(36)\\n                .nodePadding(290)\\n                .size([width, height]);\\n\\n            // load the data\\n            const graph = JSON.parse(myData);\\n\\n            // Constructs a new Sankey generator with the default settings.\\n            sankey\\n                .nodes(graph.nodes)\\n                .links(graph.links)\\n                .layout(1);\\n\\n            // add in the links\\n            var link = svg.append(\\\"g\\\")\\n                .selectAll(\\\".link\\\")\\n                .data(graph.links)\\n                .enter()\\n                .append(\\\"path\\\")\\n                .attr(\\\"class\\\", \\\"link\\\")\\n                .attr(\\\"d\\\", sankey.link())\\n                .style(\\\"stroke-width\\\", function(d) {\\n                    return Math.max(1, d.dy);\\n                })\\n                .sort(function(a, b) {\\n                    return b.dy - a.dy;\\n                });\\n\\n            // add in the nodes\\n            var node = svg.append(\\\"g\\\")\\n                .selectAll(\\\".node\\\")\\n                .data(graph.nodes)\\n                .enter().append(\\\"g\\\")\\n                .attr(\\\"class\\\", \\\"node\\\")\\n                .attr(\\\"transform\\\", function(d) {\\n                    return \\\"translate(\\\" + d.x + \\\",\\\" + d.y + \\\")\\\";\\n                })\\n                .call(d3.drag()\\n                    .subject(function(d) {\\n                        return d;\\n                    })\\n                    .on(\\\"start\\\", function() {\\n                        this.parentNode.appendChild(this);\\n                    })\\n                    .on(\\\"drag\\\", dragmove));\\n\\n            // add the rectangles for the nodes\\n            node\\n                .append(\\\"rect\\\")\\n                .attr(\\\"height\\\", function(d) {\\n                    return d.dy;\\n                })\\n                .attr(\\\"width\\\", sankey.nodeWidth())\\n                .style(\\\"fill\\\", function(d) {\\n                    return d.color = color(d.name.replace(/ .*/, \\\"\\\"));\\n                })\\n                .style(\\\"stroke\\\", function(d) {\\n                    return d3.rgb(d.color).darker(2);\\n                })\\n                // Add hover text\\n                .append(\\\"title\\\")\\n                .text(function(d) {\\n                    return d.name + \\\"\\\\n\\\" + \\\"There is \\\" + d.value + \\\" stuff in this node\\\";\\n                });\\n\\n            // add in the title for the nodes\\n            node\\n                .append(\\\"text\\\")\\n                .attr(\\\"x\\\", -6)\\n                .attr(\\\"y\\\", function(d) {\\n                    return d.dy / 2;\\n                })\\n                .attr(\\\"dy\\\", \\\".35em\\\")\\n                .attr(\\\"text-anchor\\\", \\\"end\\\")\\n                .attr(\\\"transform\\\", null)\\n                .text(function(d) {\\n                    return d.name;\\n                })\\n                .filter(function(d) {\\n                    return d.x < width / 2;\\n                })\\n                .attr(\\\"x\\\", 6 + sankey.nodeWidth())\\n                .attr(\\\"text-anchor\\\", \\\"start\\\");\\n\\n            // the function for moving the nodes\\n            function dragmove(d) {\\n                d3.select(this)\\n                    .attr(\\\"transform\\\",\\n                        \\\"translate(\\\" +\\n                        d.x + \\\",\\\" +\\n                        (d.y = Math.max(\\n                            0, Math.min(height - d.dy, d3.event.y))) + \\\")\\\");\\n                sankey.relayout();\\n                link.attr(\\\"d\\\", sankey.link());\\n            }\\n    });\\n}\\n})\",\"multiquerydsl\":\"{\\n\\n}\",\"formula\":\"<style>\\n .link {\\n    fill: none;\\n    stroke: #000;\\n    stroke-opacity: .2;\\n  }\\n  .link:hover {\\n    stroke-opacity: .5;\\n  }\\n</style>\\n\\n<html lang=\\\"en\\\">\\n<head>\\n\\t<title>Sankey</title>\\n</head>\\n<body>\\n\\n    <div id=\\\"dataView\\\"></div>\\n\\n</body>\",\"dimensions\":{\"metric\":[]}}}"},"id":"128ae010-f8e2-11ea-88aa-c7007c757592","migrationVersion":{"visualization":"7.10.0"},"references":[],"type":"visualization","updated_at":"2021-10-29T15:34:03.839Z","version":"WzI3LDJd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"[eCommerce] Controls","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"[eCommerce] Controls\",\"type\":\"input_control_vis\",\"params\":{\"controls\":[{\"id\":\"1536977437774\",\"fieldName\":\"manufacturer.keyword\",\"parent\":\"\",\"label\":\"Manufacturer\",\"type\":\"list\",\"options\":{\"type\":\"terms\",\"multiselect\":true,\"dynamicOptions\":true,\"size\":5,\"order\":\"desc\"},\"indexPatternRefName\":\"control_0_index_pattern\"},{\"id\":\"1536977465554\",\"fieldName\":\"category.keyword\",\"parent\":\"\",\"label\":\"Category\",\"type\":\"list\",\"options\":{\"type\":\"terms\",\"multiselect\":true,\"dynamicOptions\":true,\"size\":5,\"order\":\"desc\"},\"indexPatternRefName\":\"control_1_index_pattern\"},{\"id\":\"1536977596163\",\"fieldName\":\"total_quantity\",\"parent\":\"\",\"label\":\"Quantity\",\"type\":\"range\",\"options\":{\"decimalPlaces\":0,\"step\":1},\"indexPatternRefName\":\"control_2_index_pattern\"}],\"updateFiltersOnChange\":false,\"useTimeFilter\":true,\"pinFilters\":false},\"aggs\":[]}"},"id":"1c389590-b88d-11e8-a6d9-e546fe2bba5f","migrationVersion":{"visualization":"7.10.0"},"references":[{"id":"ff959d40-b880-11e8-a6d9-e546fe2bba5f","name":"control_0_index_pattern","type":"index-pattern"},{"id":"ff959d40-b880-11e8-a6d9-e546fe2bba5f","name":"control_1_index_pattern","type":"index-pattern"},{"id":"ff959d40-b880-11e8-a6d9-e546fe2bba5f","name":"control_2_index_pattern","type":"index-pattern"}],"type":"visualization","updated_at":"2021-10-29T15:18:59.228Z","version":"WzQsMl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"sample_googleChartScatterAndControlIframe","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"sample_googleChartScatterAndControlIframe\",\"type\":\"transform\",\"aggs\":[],\"params\":{\"dimensions\":{\"metric\":[]},\"formula\":\"<div id=\\\"myDiv\\\" class=\\\"container\\\">\\n</div>\\n\",\"meta\":\"({\\nbefore_render: function() {\\n\\n  // Prepare the data\\n  var data = [\\n    [ 8, 12, \\\"data1\\\"],\\n    [ 4, 15.5, \\\"data2\\\"],\\n    [ 11, 14, \\\"data3\\\"],\\n    [ 4, 22, \\\"data4\\\"],\\n    [ 3, 3.5, \\\"data5\\\"],\\n    [ 6.5, 7, \\\"data6\\\"]\\n  ];\\n  \\n  // Store data into browser to make it available for iframe\\n  localStorage.setItem('scatterValues', JSON.stringify(data))\\n},\\n\\nafter_render: function() {\\n      //-------------------------------------------------------------------------\\n      // Dive: function to get the location of a CSS selector within a shadow DOM \\n      //-------------------------------------------------------------------------\\n      function getShadowDomLocation(selector) {\\n        let vizLocation;\\n        // output-viz being the top selector used by the Transform plugin\\n        // Get all the output-viz elements (can have mutliple selector if multiple transfrm vizs in a dashboard)\\n        // selector parameter value must be unque within the DOM\\n        const elements = $('.output-vis');\\n        let shadow;\\n        for (let elem of elements) {\\n          shadow = elem.shadowRoot;\\n          vizLocation = $(shadow).find(selector);\\n          if (vizLocation.length > 0) {\\n            // selector found, exiting\\n            break;\\n          } else {\\n            vizLocation = '.notFound';\\n          }\\n        } \\n        const obj = {\\n        vizLocation: vizLocation,\\n        shadowRoot: shadow\\n        }\\n        // obj object contains the shadowRoot element and and the location of the selector within the shadowRoot\\n        return obj; \\n      }\\n\\n      let myDiv = getShadowDomLocation(\\\"#myDiv\\\").vizLocation; \\n      $(myDiv).empty();\\n      $(myDiv).append('<iframe style=\\\"position:absolute;top:0;left:0;width:100%;height:100%;border:none;\\\" id=\\\"myIframe\\\" ></iframe>')\\n      let iframe = getShadowDomLocation(\\\"#myIframe\\\").vizLocation; \\n      let theIframe = iframe[0];         \\n      theIframe.contentDocument.open();\\n      theIframe.contentDocument.write(\\\"scatter \\\");\\n      let theIframeContentWindow = theIframe.contentWindow;\\n  \\n      let script0 = theIframeContentWindow.document.createElement('script');\\n      let url0 = \\\"https://www.gstatic.com/charts/loader.js\\\";\\n      script0.src = url0;\\n\\n      // DrawChart function  \\n      let script1 = theIframeContentWindow.document.createElement('script');\\n      script1.type = 'text/javascript';\\n      script1.text = `function drawChart() {\\n        let myData =JSON.parse(localStorage.getItem('scatterValues'));\\n\\n        let divLocation = document.body.appendChild(document.createElement('div') );\\n        divLocation.id = 'bigDiv';\\n        let chartLocation = divLocation.appendChild(document.createElement('div') );\\n        chartLocation.id = 'chartDiv';\\n        let controlLocation = divLocation.appendChild(document.createElement('div') );\\n        controlLocation.id = 'controlDiv';\\n\\n        var dashboard = new google.visualization.Dashboard(\\n          divLocation);\\n\\n        // We omit \\\"var\\\" so that programmaticSlider is visible to changeRange.\\n        var programmaticSlider = new google.visualization.ControlWrapper({\\n          'controlType': 'NumberRangeFilter',\\n          'containerId': controlLocation,\\n          'options': {\\n            'filterColumnLabel': 'Age',\\n            'ui': {'labelStacking': 'vertical'}\\n          }\\n        });\\n\\n        var programmaticChart  = new google.visualization.ChartWrapper({\\n          'chartType': 'ScatterChart',\\n          'containerId': chartLocation,\\n          'options': {\\n            width: 1000,\\n            height: 350,\\n            title: 'Age vs. Weight',\\n            titleTextStyle: {color: 'black', bold: true},\\n            hAxis: {\\n              title: 'Age', \\n              minValue: 0, \\n              maxValue: 15,\\n              titleTextStyle: {\\n                color: 'black', \\n                bold: false,\\n                italic: false\\n              },\\n            },\\n            vAxis: {\\n              title: 'Weight', \\n              minValue: 0, \\n              maxValue: 15,\\n              titleTextStyle: {\\n                color: 'black', \\n                bold: false,\\n                italic: false\\n              },\\n            },\\n            legend: 'none',\\n            colors: ['#4BB4E6'],\\n            pointSize: 12,\\n            annotations: {\\n              textStyle: {\\n                fontName: 'Arial',\\n                fontSize: 12,\\n                bold: true,\\n                italic: false,\\n                color: 'black'\\n              }\\n            }\\n          }\\n        });\\n\\n        // Preparing the table for the chart  \\n        var data = new google.visualization.DataTable();\\n        data.addColumn('number', 'Age');\\n        data.addColumn('number', 'Weight');\\n        data.addColumn({type:'string', role:'annotation'});\\n        data.addColumn({type:'string', role:'tooltip', p: {html: true}})\\n \\n        let dataRows = [];\\n        for (let z = 0; z < myData.length;  z++) {\\n          dataRows.push([\\n            parseFloat(myData[z][0]), \\n            parseFloat(myData[z][1]),\\n            myData[z][2],\\n            myData[z][2]+'\\\\\\\\n'+'\\\\\\\\n'+'Age: '+myData[z][1]+'\\\\\\\\n'+'Poids: '+myData[z][0]\\n          ]);\\n         }\\n         data.addRows(dataRows);\\n         \\n        dashboard.bind(programmaticSlider, programmaticChart);\\n        dashboard.draw(data);\\n\\n      }`;\\n\\n    let script2 = theIframeContentWindow.document.createElement('script');\\n    script2.type = 'text/javascript';\\n    script2.text = 'google.charts.load(\\\\'current\\\\', {packages: [\\\\'corechart\\\\', \\\\'controls\\\\']}).then(drawChart);';\\n\\n    script0.onload = function() {\\n        console.log(\\\"Script \\\" + url0 + \\\" is loaded.\\\");\\n        theIframeContentWindow.document.getElementsByTagName('head')[0].appendChild(script1);\\n        theIframeContentWindow.document.getElementsByTagName('head')[0].appendChild(script2);\\n      };\\n      \\n      theIframeContentWindow.document.getElementsByTagName('head')[0].appendChild(script0);\\n      theIframe.contentDocument.close();\\n  }\\n});\",\"multiquerydsl\":\"{\\n\\n}\"}}"},"id":"2f3a74b0-6d30-11eb-a3a1-27afa2682979","migrationVersion":{"visualization":"7.10.0"},"references":[],"type":"visualization","updated_at":"2021-10-29T15:28:06.616Z","version":"WzIxLDJd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"[eCommerce] Sales by Category","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"[eCommerce] Sales by Category\",\"type\":\"area\",\"params\":{\"type\":\"area\",\"grid\":{\"categoryLines\":false,\"style\":{\"color\":\"#eee\"}},\"categoryAxes\":[{\"id\":\"CategoryAxis-1\",\"type\":\"category\",\"position\":\"bottom\",\"show\":true,\"style\":{},\"scale\":{\"type\":\"linear\"},\"labels\":{\"show\":true,\"truncate\":100},\"title\":{}}],\"valueAxes\":[{\"id\":\"ValueAxis-1\",\"name\":\"LeftAxis-1\",\"type\":\"value\",\"position\":\"left\",\"show\":true,\"style\":{},\"scale\":{\"type\":\"linear\",\"mode\":\"normal\"},\"labels\":{\"show\":true,\"rotate\":0,\"filter\":false,\"truncate\":100},\"title\":{\"text\":\"Sum of total_quantity\"}}],\"seriesParams\":[{\"show\":\"true\",\"type\":\"area\",\"mode\":\"stacked\",\"data\":{\"label\":\"Sum of total_quantity\",\"id\":\"1\"},\"drawLinesBetweenPoints\":true,\"showCircles\":true,\"interpolate\":\"linear\",\"valueAxis\":\"ValueAxis-1\"}],\"addTooltip\":true,\"addLegend\":true,\"legendPosition\":\"top\",\"times\":[],\"addTimeMarker\":false},\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"sum\",\"schema\":\"metric\",\"params\":{\"field\":\"total_quantity\"}},{\"id\":\"2\",\"enabled\":true,\"type\":\"date_histogram\",\"schema\":\"segment\",\"params\":{\"field\":\"order_date\",\"interval\":\"auto\",\"drop_partials\":false,\"min_doc_count\":1,\"extended_bounds\":{}}},{\"id\":\"3\",\"enabled\":true,\"type\":\"terms\",\"schema\":\"group\",\"params\":{\"field\":\"category.keyword\",\"size\":5,\"order\":\"desc\",\"orderBy\":\"1\",\"otherBucket\":false,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\"}}]}"},"id":"37cc8650-b882-11e8-a6d9-e546fe2bba5f","migrationVersion":{"visualization":"7.10.0"},"references":[{"id":"ff959d40-b880-11e8-a6d9-e546fe2bba5f","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-10-29T15:18:59.228Z","version":"WzEsMl0="}
{"attributes":{"columns":["category","sku","taxful_total_price","total_quantity"],"description":"","hits":0,"kibanaSavedObjectMeta":{"searchSourceJSON":"{\"highlightAll\":true,\"version\":true,\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"sort":[["order_date","desc"]],"title":"[eCommerce] Orders","version":1},"id":"3ba638e0-b894-11e8-a6d9-e546fe2bba5f","migrationVersion":{"search":"7.9.3"},"references":[{"id":"ff959d40-b880-11e8-a6d9-e546fe2bba5f","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"search","updated_at":"2021-10-29T15:18:59.228Z","version":"WzEwLDJd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{}"},"title":"[eCommerce] Promotion Tracking","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"[eCommerce] Promotion Tracking\",\"type\":\"metrics\",\"params\":{\"id\":\"61ca57f0-469d-11e7-af02-69e470af7417\",\"type\":\"timeseries\",\"series\":[{\"id\":\"ea20ae70-b88d-11e8-a451-f37365e9f268\",\"color\":\"rgba(240,138,217,1)\",\"split_mode\":\"everything\",\"metrics\":[{\"id\":\"ea20ae71-b88d-11e8-a451-f37365e9f268\",\"type\":\"sum\",\"field\":\"taxful_total_price\"}],\"separate_axis\":0,\"axis_position\":\"right\",\"formatter\":\"number\",\"chart_type\":\"line\",\"line_width\":1,\"point_size\":1,\"fill\":\"0.7\",\"stacked\":\"none\",\"filter\":{\"query\":\"products.product_name:*trouser*\",\"language\":\"lucene\"},\"label\":\"Revenue Trousers\",\"value_template\":\"${{value}}\",\"split_color_mode\":\"gradient\"},{\"id\":\"062d77b0-b88e-11e8-a451-f37365e9f268\",\"color\":\"rgba(191,240,129,1)\",\"split_mode\":\"everything\",\"metrics\":[{\"id\":\"062d77b1-b88e-11e8-a451-f37365e9f268\",\"type\":\"sum\",\"field\":\"taxful_total_price\"}],\"separate_axis\":0,\"axis_position\":\"right\",\"formatter\":\"number\",\"chart_type\":\"line\",\"line_width\":1,\"point_size\":1,\"fill\":\"0.7\",\"stacked\":\"none\",\"filter\":{\"query\":\"products.product_name:*watch*\",\"language\":\"lucene\"},\"label\":\"Revenue Watches\",\"value_template\":\"${{value}}\",\"split_color_mode\":\"gradient\"},{\"id\":\"61ca57f1-469d-11e7-af02-69e470af7417\",\"color\":\"rgba(23,233,230,1)\",\"split_mode\":\"everything\",\"metrics\":[{\"id\":\"61ca57f2-469d-11e7-af02-69e470af7417\",\"type\":\"sum\",\"field\":\"taxful_total_price\"}],\"separate_axis\":0,\"axis_position\":\"right\",\"formatter\":\"number\",\"chart_type\":\"line\",\"line_width\":1,\"point_size\":1,\"fill\":\"0.7\",\"stacked\":\"none\",\"filter\":{\"query\":\"products.product_name:*bag*\",\"language\":\"lucene\"},\"label\":\"Revenue Bags\",\"value_template\":\"${{value}}\",\"split_color_mode\":\"gradient\"},{\"id\":\"faa2c170-b88d-11e8-a451-f37365e9f268\",\"color\":\"rgba(235,186,180,1)\",\"split_mode\":\"everything\",\"metrics\":[{\"id\":\"faa2c171-b88d-11e8-a451-f37365e9f268\",\"type\":\"sum\",\"field\":\"taxful_total_price\"}],\"separate_axis\":0,\"axis_position\":\"right\",\"formatter\":\"number\",\"chart_type\":\"line\",\"line_width\":1,\"point_size\":1,\"fill\":\"0.7\",\"stacked\":\"none\",\"filter\":{\"query\":\"products.product_name:*cocktail dress*\",\"language\":\"lucene\"},\"label\":\"Revenue Cocktail Dresses\",\"value_template\":\"${{value}}\",\"split_color_mode\":\"gradient\"}],\"time_field\":\"order_date\",\"index_pattern\":\"opensearch_dashboards_sample_data_ecommerce\",\"interval\":\">=12h\",\"axis_position\":\"left\",\"axis_formatter\":\"number\",\"axis_scale\":\"normal\",\"show_legend\":1,\"show_grid\":1,\"legend_position\":\"bottom\",\"annotations\":[{\"fields\":\"taxful_total_price\",\"template\":\"Ring the bell! ${{taxful_total_price}}\",\"index_pattern\":\"opensearch_dashboards_sample_data_ecommerce\",\"query_string\":{\"query\":\"taxful_total_price:>250\",\"language\":\"lucene\"},\"id\":\"c8c30be0-b88f-11e8-a451-f37365e9f268\",\"color\":\"rgba(25,77,51,1)\",\"time_field\":\"order_date\",\"icon\":\"fa-bell\",\"ignore_global_filters\":1,\"ignore_panel_filters\":1}]},\"aggs\":[]}"},"id":"45e07720-b890-11e8-a6d9-e546fe2bba5f","migrationVersion":{"visualization":"7.10.0"},"references":[],"type":"visualization","updated_at":"2021-10-29T15:18:59.228Z","version":"WzUsMl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"[eCommerce] Average Sales Price","uiStateJSON":"{\"vis\":{\"defaultColors\":{\"0 - 50\":\"rgb(165,0,38)\",\"50 - 75\":\"rgb(255,255,190)\",\"75 - 100\":\"rgb(0,104,55)\"}}}","version":1,"visState":"{\"title\":\"[eCommerce] Average Sales Price\",\"type\":\"gauge\",\"params\":{\"type\":\"gauge\",\"addTooltip\":true,\"addLegend\":true,\"isDisplayWarning\":false,\"gauge\":{\"extendRange\":true,\"percentageMode\":false,\"gaugeType\":\"Circle\",\"gaugeStyle\":\"Full\",\"backStyle\":\"Full\",\"orientation\":\"vertical\",\"colorSchema\":\"Green to Red\",\"gaugeColorMode\":\"Labels\",\"colorsRange\":[{\"from\":0,\"to\":50},{\"from\":50,\"to\":75},{\"from\":75,\"to\":100}],\"invertColors\":true,\"labels\":{\"show\":true,\"color\":\"black\"},\"scale\":{\"show\":false,\"labels\":false,\"color\":\"#333\"},\"type\":\"meter\",\"style\":{\"bgWidth\":0.9,\"width\":0.9,\"mask\":false,\"bgMask\":false,\"maskBars\":50,\"bgFill\":\"#eee\",\"bgColor\":false,\"subText\":\"per order\",\"fontSize\":60,\"labelColor\":true},\"minAngle\":0,\"maxAngle\":6.283185307179586,\"alignment\":\"horizontal\"}},\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"avg\",\"schema\":\"metric\",\"params\":{\"field\":\"taxful_total_price\",\"customLabel\":\"average spend\"}}]}"},"id":"4b3ec120-b892-11e8-a6d9-e546fe2bba5f","migrationVersion":{"visualization":"7.10.0"},"references":[{"id":"ff959d40-b880-11e8-a6d9-e546fe2bba5f","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-10-29T15:18:59.228Z","version":"WzgsMl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"[eCommerce] Sales by Gender","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"[eCommerce] Sales by Gender\",\"type\":\"pie\",\"params\":{\"type\":\"pie\",\"addTooltip\":true,\"addLegend\":true,\"legendPosition\":\"right\",\"isDonut\":true,\"labels\":{\"show\":true,\"values\":true,\"last_level\":true,\"truncate\":100}},\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"count\",\"schema\":\"metric\",\"params\":{}},{\"id\":\"2\",\"enabled\":true,\"type\":\"terms\",\"schema\":\"segment\",\"params\":{\"field\":\"customer_gender\",\"size\":5,\"order\":\"desc\",\"orderBy\":\"1\",\"otherBucket\":false,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\"}}]}"},"id":"ed8436b0-b88b-11e8-a6d9-e546fe2bba5f","migrationVersion":{"visualization":"7.10.0"},"references":[{"id":"ff959d40-b880-11e8-a6d9-e546fe2bba5f","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-10-29T15:18:59.228Z","version":"WzIsMl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{}"},"title":"[eCommerce] Sold Products per Day","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"[eCommerce] Sold Products per Day\",\"type\":\"metrics\",\"params\":{\"id\":\"61ca57f0-469d-11e7-af02-69e470af7417\",\"type\":\"gauge\",\"series\":[{\"id\":\"61ca57f1-469d-11e7-af02-69e470af7417\",\"color\":\"#68BC00\",\"split_mode\":\"everything\",\"metrics\":[{\"id\":\"61ca57f2-469d-11e7-af02-69e470af7417\",\"type\":\"count\"}],\"separate_axis\":0,\"axis_position\":\"right\",\"formatter\":\"number\",\"chart_type\":\"line\",\"line_width\":1,\"point_size\":1,\"fill\":0.5,\"stacked\":\"none\",\"label\":\"Trxns / day\",\"split_color_mode\":\"gradient\"}],\"time_field\":\"order_date\",\"index_pattern\":\"opensearch_dashboards_sample_data_ecommerce\",\"interval\":\"1d\",\"axis_position\":\"left\",\"axis_formatter\":\"number\",\"axis_scale\":\"normal\",\"show_legend\":1,\"show_grid\":1,\"gauge_color_rules\":[{\"value\":150,\"id\":\"6da070c0-b891-11e8-b645-195edeb9de84\",\"gauge\":\"rgba(104,188,0,1)\",\"operator\":\"gte\"},{\"value\":150,\"id\":\"9b0cdbc0-b891-11e8-b645-195edeb9de84\",\"gauge\":\"rgba(244,78,59,1)\",\"operator\":\"lt\"}],\"gauge_width\":\"15\",\"gauge_inner_width\":10,\"gauge_style\":\"half\",\"filter\":\"\",\"gauge_max\":\"300\"},\"aggs\":[]}"},"id":"b80e6540-b891-11e8-a6d9-e546fe2bba5f","migrationVersion":{"visualization":"7.10.0"},"references":[],"type":"visualization","updated_at":"2021-10-29T15:18:59.228Z","version":"WzcsMl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"[eCommerce] Average Sold Quantity","uiStateJSON":"{\"vis\":{\"defaultColors\":{\"0 - 2\":\"rgb(165,0,38)\",\"2 - 3\":\"rgb(255,255,190)\",\"3 - 4\":\"rgb(0,104,55)\"}}}","version":1,"visState":"{\"title\":\"[eCommerce] Average Sold Quantity\",\"type\":\"gauge\",\"params\":{\"type\":\"gauge\",\"addTooltip\":true,\"addLegend\":true,\"isDisplayWarning\":false,\"gauge\":{\"extendRange\":true,\"percentageMode\":false,\"gaugeType\":\"Circle\",\"gaugeStyle\":\"Full\",\"backStyle\":\"Full\",\"orientation\":\"vertical\",\"colorSchema\":\"Green to Red\",\"gaugeColorMode\":\"Labels\",\"colorsRange\":[{\"from\":0,\"to\":2},{\"from\":2,\"to\":3},{\"from\":3,\"to\":4}],\"invertColors\":true,\"labels\":{\"show\":true,\"color\":\"black\"},\"scale\":{\"show\":false,\"labels\":false,\"color\":\"#333\"},\"type\":\"meter\",\"style\":{\"bgWidth\":0.9,\"width\":0.9,\"mask\":false,\"bgMask\":false,\"maskBars\":50,\"bgFill\":\"#eee\",\"bgColor\":false,\"subText\":\"per order\",\"fontSize\":60,\"labelColor\":true},\"minAngle\":0,\"maxAngle\":6.283185307179586,\"alignment\":\"horizontal\"}},\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"avg\",\"schema\":\"metric\",\"params\":{\"field\":\"total_quantity\",\"customLabel\":\"average items\"}}]}"},"id":"9ca7aa90-b892-11e8-a6d9-e546fe2bba5f","migrationVersion":{"visualization":"7.10.0"},"references":[{"id":"ff959d40-b880-11e8-a6d9-e546fe2bba5f","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-10-29T15:18:59.228Z","version":"WzksMl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"[eCommerce] Sales Count Map","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"[eCommerce] Sales Count Map\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  $schema: https://vega.github.io/schema/vega/v5.json\\n  config: {\\n    kibana: {type: \\\"map\\\", latitude: 25, longitude: -40, zoom: 3}\\n  }\\n  data: [\\n    {\\n      name: table\\n      url: {\\n        index: opensearch_dashboards_sample_data_ecommerce\\n        %context%: true\\n        %timefield%: order_date\\n        body: {\\n          size: 0\\n          aggs: {\\n            gridSplit: {\\n              geotile_grid: {field: \\\"geoip.location\\\", precision: 4, size: 10000}\\n              aggs: {\\n                gridCentroid: {\\n                  geo_centroid: {\\n                    field: \\\"geoip.location\\\"\\n                  }\\n                }\\n              }\\n            }\\n          }\\n        }\\n      }\\n      format: {property: \\\"aggregations.gridSplit.buckets\\\"}\\n      transform: [\\n        {\\n          type: geopoint\\n          projection: projection\\n          fields: [\\n            gridCentroid.location.lon\\n            gridCentroid.location.lat\\n          ]\\n        }\\n      ]\\n    }\\n  ]\\n  scales: [\\n    {\\n      name: gridSize\\n      type: linear\\n      domain: {data: \\\"table\\\", field: \\\"doc_count\\\"}\\n      range: [\\n        50\\n        1000\\n      ]\\n    }\\n  ]\\n  marks: [\\n    {\\n      name: gridMarker\\n      type: symbol\\n      from: {data: \\\"table\\\"}\\n      encode: {\\n        update: {\\n          size: {scale: \\\"gridSize\\\", field: \\\"doc_count\\\"}\\n          xc: {signal: \\\"datum.x\\\"}\\n          yc: {signal: \\\"datum.y\\\"}\\n        }\\n      }\\n    },\\n    {\\n      name: gridLabel\\n      type: text\\n      from: {data: \\\"table\\\"}\\n      encode: {\\n        enter: {\\n          fill: {value: \\\"firebrick\\\"}\\n          text: {signal: \\\"datum.doc_count\\\"}\\n        }\\n        update: {\\n          x: {signal: \\\"datum.x\\\"}\\n          y: {signal: \\\"datum.y\\\"}\\n          dx: {value: -6}\\n          dy: {value: 6}\\n          fontSize: {value: 18}\\n          fontWeight: {value: \\\"bold\\\"}\\n        }\\n      }\\n    }\\n  ]\\n}\"}}"},"id":"9c6f83f0-bb4d-11e8-9c84-77068524bcab","migrationVersion":{"visualization":"7.10.0"},"references":[{"id":"ff959d40-b880-11e8-a6d9-e546fe2bba5f","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-10-29T15:18:59.228Z","version":"WzExLDJd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"[eCommerce] Top Selling Products","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"[eCommerce] Top Selling Products\",\"type\":\"tagcloud\",\"params\":{\"scale\":\"linear\",\"orientation\":\"single\",\"minFontSize\":18,\"maxFontSize\":72,\"showLabel\":false},\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"count\",\"schema\":\"metric\",\"params\":{}},{\"id\":\"2\",\"enabled\":true,\"type\":\"terms\",\"schema\":\"segment\",\"params\":{\"field\":\"products.product_name.keyword\",\"size\":7,\"order\":\"desc\",\"orderBy\":\"1\",\"otherBucket\":false,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\"}}]}"},"id":"b72dd430-bb4d-11e8-9c84-77068524bcab","migrationVersion":{"visualization":"7.10.0"},"references":[{"id":"ff959d40-b880-11e8-a6d9-e546fe2bba5f","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-10-29T15:18:59.228Z","version":"WzEyLDJd"}
{"attributes":{"description":"Analyze mock eCommerce orders and revenue","hits":0,"kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}"},"optionsJSON":"{\"hidePanelTitles\":false,\"useMargins\":true}","panelsJSON":"[{\"embeddableConfig\":{\"vis\":{\"colors\":{\"Men's Accessories\":\"#82B5D8\",\"Men's Clothing\":\"#F9BA8F\",\"Men's Shoes\":\"#F29191\",\"Women's Accessories\":\"#F4D598\",\"Women's Clothing\":\"#70DBED\",\"Women's Shoes\":\"#B7DBAB\"}}},\"gridData\":{\"x\":12,\"y\":18,\"w\":36,\"h\":10,\"i\":\"1\"},\"panelIndex\":\"1\",\"version\":\"7.0.0-alpha1\",\"panelRefName\":\"panel_0\"},{\"embeddableConfig\":{\"vis\":{\"colors\":{\"FEMALE\":\"#6ED0E0\",\"MALE\":\"#447EBC\"},\"legendOpen\":false}},\"gridData\":{\"x\":12,\"y\":7,\"w\":12,\"h\":11,\"i\":\"2\"},\"panelIndex\":\"2\",\"version\":\"7.0.0-alpha1\",\"panelRefName\":\"panel_1\"},{\"embeddableConfig\":{},\"gridData\":{\"x\":0,\"y\":0,\"w\":18,\"h\":7,\"i\":\"3\"},\"panelIndex\":\"3\",\"version\":\"7.0.0-alpha1\",\"panelRefName\":\"panel_2\"},{\"embeddableConfig\":{},\"gridData\":{\"x\":18,\"y\":0,\"w\":30,\"h\":7,\"i\":\"4\"},\"panelIndex\":\"4\",\"version\":\"7.0.0-alpha1\",\"panelRefName\":\"panel_3\"},{\"embeddableConfig\":{},\"gridData\":{\"x\":0,\"y\":28,\"w\":48,\"h\":11,\"i\":\"5\"},\"panelIndex\":\"5\",\"version\":\"7.0.0-alpha1\",\"panelRefName\":\"panel_4\"},{\"embeddableConfig\":{},\"gridData\":{\"x\":0,\"y\":18,\"w\":12,\"h\":10,\"i\":\"6\"},\"panelIndex\":\"6\",\"version\":\"7.0.0-alpha1\",\"panelRefName\":\"panel_5\"},{\"embeddableConfig\":{},\"gridData\":{\"x\":0,\"y\":7,\"w\":12,\"h\":11,\"i\":\"7\"},\"panelIndex\":\"7\",\"version\":\"7.0.0-alpha1\",\"panelRefName\":\"panel_6\"},{\"embeddableConfig\":{\"vis\":{\"colors\":{\"0 - 50\":\"#E24D42\",\"50 - 75\":\"#EAB839\",\"75 - 100\":\"#7EB26D\"},\"defaultColors\":{\"0 - 50\":\"rgb(165,0,38)\",\"50 - 75\":\"rgb(255,255,190)\",\"75 - 100\":\"rgb(0,104,55)\"},\"legendOpen\":false}},\"gridData\":{\"x\":24,\"y\":7,\"w\":12,\"h\":11,\"i\":\"8\"},\"panelIndex\":\"8\",\"version\":\"7.0.0-alpha1\",\"panelRefName\":\"panel_7\"},{\"embeddableConfig\":{\"vis\":{\"colors\":{\"0 - 2\":\"#E24D42\",\"2 - 3\":\"#F2C96D\",\"3 - 4\":\"#9AC48A\"},\"defaultColors\":{\"0 - 2\":\"rgb(165,0,38)\",\"2 - 3\":\"rgb(255,255,190)\",\"3 - 4\":\"rgb(0,104,55)\"},\"legendOpen\":false}},\"gridData\":{\"x\":36,\"y\":7,\"w\":12,\"h\":11,\"i\":\"9\"},\"panelIndex\":\"9\",\"version\":\"7.0.0-alpha1\",\"panelRefName\":\"panel_8\"},{\"embeddableConfig\":{},\"gridData\":{\"x\":0,\"y\":54,\"w\":48,\"h\":18,\"i\":\"10\"},\"panelIndex\":\"10\",\"version\":\"7.0.0-alpha1\",\"panelRefName\":\"panel_9\"},{\"embeddableConfig\":{\"mapZoom\":2,\"mapCenter\":[28.304380682962783,-22.148437500000004]},\"gridData\":{\"x\":0,\"y\":39,\"w\":24,\"h\":15,\"i\":\"11\"},\"panelIndex\":\"11\",\"version\":\"7.0.0-alpha1\",\"panelRefName\":\"panel_10\"},{\"embeddableConfig\":{},\"gridData\":{\"x\":24,\"y\":39,\"w\":24,\"h\":15,\"i\":\"12\"},\"panelIndex\":\"12\",\"version\":\"7.0.0-alpha1\",\"panelRefName\":\"panel_11\"}]","refreshInterval":{"pause":false,"value":900000},"timeFrom":"now-7d","timeRestore":true,"timeTo":"now","title":"[eCommerce] Revenue Dashboard","version":1},"id":"722b74f0-b882-11e8-a6d9-e546fe2bba5f","migrationVersion":{"dashboard":"7.9.3"},"references":[{"id":"37cc8650-b882-11e8-a6d9-e546fe2bba5f","name":"panel_0","type":"visualization"},{"id":"ed8436b0-b88b-11e8-a6d9-e546fe2bba5f","name":"panel_1","type":"visualization"},{"id":"09ffee60-b88c-11e8-a6d9-e546fe2bba5f","name":"panel_2","type":"visualization"},{"id":"1c389590-b88d-11e8-a6d9-e546fe2bba5f","name":"panel_3","type":"visualization"},{"id":"45e07720-b890-11e8-a6d9-e546fe2bba5f","name":"panel_4","type":"visualization"},{"id":"10f1a240-b891-11e8-a6d9-e546fe2bba5f","name":"panel_5","type":"visualization"},{"id":"b80e6540-b891-11e8-a6d9-e546fe2bba5f","name":"panel_6","type":"visualization"},{"id":"4b3ec120-b892-11e8-a6d9-e546fe2bba5f","name":"panel_7","type":"visualization"},{"id":"9ca7aa90-b892-11e8-a6d9-e546fe2bba5f","name":"panel_8","type":"visualization"},{"id":"3ba638e0-b894-11e8-a6d9-e546fe2bba5f","name":"panel_9","type":"search"},{"id":"9c6f83f0-bb4d-11e8-9c84-77068524bcab","name":"panel_10","type":"visualization"},{"id":"b72dd430-bb4d-11e8-9c84-77068524bcab","name":"panel_11","type":"visualization"}],"type":"dashboard","updated_at":"2021-10-29T15:18:59.228Z","version":"WzE0LDJd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"sample_decisionTree","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"sample_decisionTree\",\"type\":\"transform\",\"aggs\":[],\"params\":{\"meta\":\"({\\nafter_render: function() {\\n // Dive: on charge le JS qui va bien\\n $.getScript(\\\"https://d3js.org/d3.v3.min.js\\\")\\n     .done(function(script, textStatus) {\\n             console.log(\\\"Import Datatable Complete\\\");\\n\\n\\n                 // Dive: Get decion tree location from shadow DOM\\n                 let decisionTree;\\n                 const elements = $('.output-vis');\\n                 let shadow;\\n                 for (let elem of elements) {\\n                     shadow = elem.shadowRoot;\\n                     decisionTree = $(shadow).find(\\\"#dataView\\\");\\n                     if ($(decisionTree).length > 0) {\\n                         break;\\n                     }\\n                 }\\n                 var label_names;\\n\\n                 var TOTAL_SIZE;\\n                 let default_colors = [\\n                     \\\"#c25975\\\", \\\"#d26bff\\\", \\\"#2d5a47\\\", \\\"#093868\\\", \\\"#fcdfe6\\\", \\\"#94a2fa\\\", \\\"#faec94\\\", \\\"#decaee\\\", \\\"#daeeca\\\", \\\"#b54c0a\\\", \\\"#dc1818\\\", \\\"#18dcdc\\\", \\\"#000000\\\", \\\"#340000\\\", \\\"#86194c\\\", \\\"#fef65b\\\", \\\"#ff9b6f\\\", \\\"#491b47\\\", \\\"#171717\\\", \\\"#e8efec\\\", \\\"#1c6047\\\", \\\"#a2bae0\\\", \\\"#4978c3\\\", \\\"#f8fee0\\\", \\\"#dcfb66\\\", \\\"#91fb66\\\", \\\"#29663b\\\", \\\"#b4b7be\\\", \\\"#0088b2\\\", \\\"#88b200\\\", \\\"#c43210\\\", \\\"#f06848\\\", \\\"#f0bc48\\\", \\\"#d293a2\\\", \\\"#cccccc\\\", \\\"#59596a\\\", \\\"#fafae6\\\", \\\"#ffc125\\\", \\\"#ff4e50\\\", \\\"#f0e6fa\\\", \\\"#f6c1c3\\\", \\\"#363636\\\"\\n                 ]\\n\\n\\n\\n                 //************************************* Options******************************************************//\\n\\n                 const myData = `{\\n    \\\"name\\\": \\\"Root >\\\",\\n    \\\"pred\\\": \\\"4000 of no, 521 of yes\\\",\\n    \\\"children\\\": [\\n        {\\n            \\\"children\\\": [\\n                {\\n                    \\\"children\\\": [\\n                        {\\n                            \\\"children\\\": [\\n                                {\\n                                    \\\"children\\\": [\\n                                        {\\n                                            \\\"name\\\": \\\"balance > 662.5\\\",\\n                                            \\\"pred\\\": \\\"7 of no, 8 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"right\\\",\\n                                            \\\"size\\\": 15.0\\n                                        },\\n                                        {\\n                                            \\\"name\\\": \\\"balance <= 662.5\\\",\\n                                            \\\"pred\\\": \\\"1 of no, 11 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"left\\\",\\n                                            \\\"size\\\": 12.0\\n                                        }\\n                                    ],\\n                                    \\\"name\\\": \\\"campaign > 3.5\\\",\\n                                    \\\"side\\\": \\\"right\\\",\\n                                    \\\"type\\\": \\\"numerical\\\",\\n                                    \\\"size\\\": 27.0,\\n                                    \\\"pred\\\": \\\"8 of no, 19 of yes\\\"\\n                                },\\n                                {\\n                                    \\\"children\\\": [\\n                                        {\\n                                            \\\"name\\\": \\\"job = technician\\\",\\n                                            \\\"pred\\\": \\\"2 of no, 7 of yes\\\",\\n                                            \\\"type\\\": \\\"categorical\\\",\\n                                            \\\"side\\\": \\\"right\\\",\\n                                            \\\"size\\\": 9.0\\n                                        },\\n                                        {\\n                                            \\\"name\\\": \\\"job != technician\\\",\\n                                            \\\"pred\\\": \\\"49 of no, 34 of yes\\\",\\n                                            \\\"type\\\": \\\"categorical\\\",\\n                                            \\\"side\\\": \\\"left\\\",\\n                                            \\\"size\\\": 83.0\\n                                        }\\n                                    ],\\n                                    \\\"name\\\": \\\"campaign <= 3.5\\\",\\n                                    \\\"side\\\": \\\"left\\\",\\n                                    \\\"type\\\": \\\"numerical\\\",\\n                                    \\\"size\\\": 92.0,\\n                                    \\\"pred\\\": \\\"51 of no, 41 of yes\\\"\\n                                }\\n                            ],\\n                            \\\"name\\\": \\\"contact = cellular\\\",\\n                            \\\"side\\\": \\\"right\\\",\\n                            \\\"type\\\": \\\"categorical\\\",\\n                            \\\"size\\\": 119.0,\\n                            \\\"pred\\\": \\\"59 of no, 60 of yes\\\"\\n                        },\\n                        {\\n                            \\\"children\\\": [\\n                                {\\n                                    \\\"children\\\": [\\n                                        {\\n                                            \\\"name\\\": \\\"poutcome = success\\\",\\n                                            \\\"pred\\\": \\\"1 of no, 0 of yes\\\",\\n                                            \\\"type\\\": \\\"categorical\\\",\\n                                            \\\"side\\\": \\\"right\\\",\\n                                            \\\"size\\\": 1.0\\n                                        },\\n                                        {\\n                                            \\\"name\\\": \\\"poutcome != success\\\",\\n                                            \\\"pred\\\": \\\"0 of no, 7 of yes\\\",\\n                                            \\\"type\\\": \\\"categorical\\\",\\n                                            \\\"side\\\": \\\"left\\\",\\n                                            \\\"size\\\": 7.0\\n                                        }\\n                                    ],\\n                                    \\\"name\\\": \\\"job = retired\\\",\\n                                    \\\"side\\\": \\\"right\\\",\\n                                    \\\"type\\\": \\\"categorical\\\",\\n                                    \\\"size\\\": 8.0,\\n                                    \\\"pred\\\": \\\"1 of no, 7 of yes\\\"\\n                                },\\n                                {\\n                                    \\\"children\\\": [\\n                                        {\\n                                            \\\"name\\\": \\\"duration > 1249.5\\\",\\n                                            \\\"pred\\\": \\\"4 of no, 7 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"right\\\",\\n                                            \\\"size\\\": 11.0\\n                                        },\\n                                        {\\n                                            \\\"name\\\": \\\"duration <= 1249.5\\\",\\n                                            \\\"pred\\\": \\\"56 of no, 11 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"left\\\",\\n                                            \\\"size\\\": 67.0\\n                                        }\\n                                    ],\\n                                    \\\"name\\\": \\\"job != retired\\\",\\n                                    \\\"side\\\": \\\"left\\\",\\n                                    \\\"type\\\": \\\"categorical\\\",\\n                                    \\\"size\\\": 78.0,\\n                                    \\\"pred\\\": \\\"60 of no, 18 of yes\\\"\\n                                }\\n                            ],\\n                            \\\"name\\\": \\\"contact != cellular\\\",\\n                            \\\"side\\\": \\\"left\\\",\\n                            \\\"type\\\": \\\"categorical\\\",\\n                            \\\"size\\\": 86.0,\\n                            \\\"pred\\\": \\\"61 of no, 25 of yes\\\"\\n                        }\\n                    ],\\n                    \\\"name\\\": \\\"marital = married\\\",\\n                    \\\"side\\\": \\\"right\\\",\\n                    \\\"type\\\": \\\"categorical\\\",\\n                    \\\"size\\\": 205.0,\\n                    \\\"pred\\\": \\\"120 of no, 85 of yes\\\"\\n                },\\n                {\\n                    \\\"children\\\": [\\n                        {\\n                            \\\"children\\\": [\\n                                {\\n                                    \\\"children\\\": [\\n                                        {\\n                                            \\\"name\\\": \\\"duration > 1020.5\\\",\\n                                            \\\"pred\\\": \\\"3 of no, 15 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"right\\\",\\n                                            \\\"size\\\": 18.0\\n                                        },\\n                                        {\\n                                            \\\"name\\\": \\\"duration <= 1020.5\\\",\\n                                            \\\"pred\\\": \\\"24 of no, 15 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"left\\\",\\n                                            \\\"size\\\": 39.0\\n                                        }\\n                                    ],\\n                                    \\\"name\\\": \\\"day > 19.5\\\",\\n                                    \\\"side\\\": \\\"right\\\",\\n                                    \\\"type\\\": \\\"numerical\\\",\\n                                    \\\"size\\\": 57.0,\\n                                    \\\"pred\\\": \\\"27 of no, 30 of yes\\\"\\n                                },\\n                                {\\n                                    \\\"children\\\": [\\n                                        {\\n                                            \\\"name\\\": \\\"age > 55.5\\\",\\n                                            \\\"pred\\\": \\\"5 of no, 3 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"right\\\",\\n                                            \\\"size\\\": 8.0\\n                                        },\\n                                        {\\n                                            \\\"name\\\": \\\"age <= 55.5\\\",\\n                                            \\\"pred\\\": \\\"11 of no, 51 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"left\\\",\\n                                            \\\"size\\\": 62.0\\n                                        }\\n                                    ],\\n                                    \\\"name\\\": \\\"day <= 19.5\\\",\\n                                    \\\"side\\\": \\\"left\\\",\\n                                    \\\"type\\\": \\\"numerical\\\",\\n                                    \\\"size\\\": 70.0,\\n                                    \\\"pred\\\": \\\"16 of no, 54 of yes\\\"\\n                                }\\n                            ],\\n                            \\\"name\\\": \\\"day > 7.5\\\",\\n                            \\\"side\\\": \\\"right\\\",\\n                            \\\"type\\\": \\\"numerical\\\",\\n                            \\\"size\\\": 127.0,\\n                            \\\"pred\\\": \\\"43 of no, 84 of yes\\\"\\n                        },\\n                        {\\n                            \\\"children\\\": [\\n                                {\\n                                    \\\"name\\\": \\\"previous > 1.5\\\",\\n                                    \\\"pred\\\": \\\"0 of no, 3 of yes\\\",\\n                                    \\\"type\\\": \\\"numerical\\\",\\n                                    \\\"side\\\": \\\"right\\\",\\n                                    \\\"size\\\": 3.0\\n                                },\\n                                {\\n                                    \\\"children\\\": [\\n                                        {\\n                                            \\\"name\\\": \\\"duration > 678.5\\\",\\n                                            \\\"pred\\\": \\\"16 of no, 6 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"right\\\",\\n                                            \\\"size\\\": 22.0\\n                                        },\\n                                        {\\n                                            \\\"name\\\": \\\"duration <= 678.5\\\",\\n                                            \\\"pred\\\": \\\"0 of no, 2 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"left\\\",\\n                                            \\\"size\\\": 2.0\\n                                        }\\n                                    ],\\n                                    \\\"name\\\": \\\"previous <= 1.5\\\",\\n                                    \\\"side\\\": \\\"left\\\",\\n                                    \\\"type\\\": \\\"numerical\\\",\\n                                    \\\"size\\\": 24.0,\\n                                    \\\"pred\\\": \\\"16 of no, 8 of yes\\\"\\n                                }\\n                            ],\\n                            \\\"name\\\": \\\"day <= 7.5\\\",\\n                            \\\"side\\\": \\\"left\\\",\\n                            \\\"type\\\": \\\"numerical\\\",\\n                            \\\"size\\\": 27.0,\\n                            \\\"pred\\\": \\\"16 of no, 11 of yes\\\"\\n                        }\\n                    ],\\n                    \\\"name\\\": \\\"marital != married\\\",\\n                    \\\"side\\\": \\\"left\\\",\\n                    \\\"type\\\": \\\"categorical\\\",\\n                    \\\"size\\\": 154.0,\\n                    \\\"pred\\\": \\\"59 of no, 95 of yes\\\"\\n                }\\n            ],\\n            \\\"name\\\": \\\"duration > 645.5\\\",\\n            \\\"side\\\": \\\"right\\\",\\n            \\\"type\\\": \\\"numerical\\\",\\n            \\\"size\\\": 359.0,\\n            \\\"pred\\\": \\\"179 of no, 180 of yes\\\"\\n        },\\n        {\\n            \\\"children\\\": [\\n                {\\n                    \\\"children\\\": [\\n                        {\\n                            \\\"children\\\": [\\n                                {\\n                                    \\\"children\\\": [\\n                                        {\\n                                            \\\"name\\\": \\\"duration > 339.0\\\",\\n                                            \\\"pred\\\": \\\"1 of no, 4 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"right\\\",\\n                                            \\\"size\\\": 5.0\\n                                        },\\n                                        {\\n                                            \\\"name\\\": \\\"duration <= 339.0\\\",\\n                                            \\\"pred\\\": \\\"6 of no, 1 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"left\\\",\\n                                            \\\"size\\\": 7.0\\n                                        }\\n                                    ],\\n                                    \\\"name\\\": \\\"month = may\\\",\\n                                    \\\"side\\\": \\\"right\\\",\\n                                    \\\"type\\\": \\\"categorical\\\",\\n                                    \\\"size\\\": 12.0,\\n                                    \\\"pred\\\": \\\"7 of no, 5 of yes\\\"\\n                                },\\n                                {\\n                                    \\\"children\\\": [\\n                                        {\\n                                            \\\"name\\\": \\\"pdays > 35.5\\\",\\n                                            \\\"pred\\\": \\\"11 of no, 62 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"right\\\",\\n                                            \\\"size\\\": 73.0\\n                                        },\\n                                        {\\n                                            \\\"name\\\": \\\"pdays <= 35.5\\\",\\n                                            \\\"pred\\\": \\\"1 of no, 0 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"left\\\",\\n                                            \\\"size\\\": 1.0\\n                                        }\\n                                    ],\\n                                    \\\"name\\\": \\\"month != may\\\",\\n                                    \\\"side\\\": \\\"left\\\",\\n                                    \\\"type\\\": \\\"categorical\\\",\\n                                    \\\"size\\\": 74.0,\\n                                    \\\"pred\\\": \\\"12 of no, 62 of yes\\\"\\n                                }\\n                            ],\\n                            \\\"name\\\": \\\"duration > 180.5\\\",\\n                            \\\"side\\\": \\\"right\\\",\\n                            \\\"type\\\": \\\"numerical\\\",\\n                            \\\"size\\\": 86.0,\\n                            \\\"pred\\\": \\\"19 of no, 67 of yes\\\"\\n                        },\\n                        {\\n                            \\\"children\\\": [\\n                                {\\n                                    \\\"children\\\": [\\n                                        {\\n                                            \\\"name\\\": \\\"job = technician\\\",\\n                                            \\\"pred\\\": \\\"2 of no, 1 of yes\\\",\\n                                            \\\"type\\\": \\\"categorical\\\",\\n                                            \\\"side\\\": \\\"right\\\",\\n                                            \\\"size\\\": 3.0\\n                                        },\\n                                        {\\n                                            \\\"name\\\": \\\"job != technician\\\",\\n                                            \\\"pred\\\": \\\"0 of no, 6 of yes\\\",\\n                                            \\\"type\\\": \\\"categorical\\\",\\n                                            \\\"side\\\": \\\"left\\\",\\n                                            \\\"size\\\": 6.0\\n                                        }\\n                                    ],\\n                                    \\\"name\\\": \\\"education = tertiary\\\",\\n                                    \\\"side\\\": \\\"right\\\",\\n                                    \\\"type\\\": \\\"categorical\\\",\\n                                    \\\"size\\\": 9.0,\\n                                    \\\"pred\\\": \\\"2 of no, 7 of yes\\\"\\n                                },\\n                                {\\n                                    \\\"children\\\": [\\n                                        {\\n                                            \\\"name\\\": \\\"marital = divorced\\\",\\n                                            \\\"pred\\\": \\\"0 of no, 1 of yes\\\",\\n                                            \\\"type\\\": \\\"categorical\\\",\\n                                            \\\"side\\\": \\\"right\\\",\\n                                            \\\"size\\\": 1.0\\n                                        },\\n                                        {\\n                                            \\\"name\\\": \\\"marital != divorced\\\",\\n                                            \\\"pred\\\": \\\"18 of no, 1 of yes\\\",\\n                                            \\\"type\\\": \\\"categorical\\\",\\n                                            \\\"side\\\": \\\"left\\\",\\n                                            \\\"size\\\": 19.0\\n                                        }\\n                                    ],\\n                                    \\\"name\\\": \\\"education != tertiary\\\",\\n                                    \\\"side\\\": \\\"left\\\",\\n                                    \\\"type\\\": \\\"categorical\\\",\\n                                    \\\"size\\\": 20.0,\\n                                    \\\"pred\\\": \\\"18 of no, 2 of yes\\\"\\n                                }\\n                            ],\\n                            \\\"name\\\": \\\"duration <= 180.5\\\",\\n                            \\\"side\\\": \\\"left\\\",\\n                            \\\"type\\\": \\\"numerical\\\",\\n                            \\\"size\\\": 29.0,\\n                            \\\"pred\\\": \\\"20 of no, 9 of yes\\\"\\n                        }\\n                    ],\\n                    \\\"name\\\": \\\"poutcome = success\\\",\\n                    \\\"side\\\": \\\"right\\\",\\n                    \\\"type\\\": \\\"categorical\\\",\\n                    \\\"size\\\": 115.0,\\n                    \\\"pred\\\": \\\"39 of no, 76 of yes\\\"\\n                },\\n                {\\n                    \\\"children\\\": [\\n                        {\\n                            \\\"children\\\": [\\n                                {\\n                                    \\\"children\\\": [\\n                                        {\\n                                            \\\"name\\\": \\\"balance > 5477.5\\\",\\n                                            \\\"pred\\\": \\\"1 of no, 0 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"right\\\",\\n                                            \\\"size\\\": 1.0\\n                                        },\\n                                        {\\n                                            \\\"name\\\": \\\"balance <= 5477.5\\\",\\n                                            \\\"pred\\\": \\\"0 of no, 11 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"left\\\",\\n                                            \\\"size\\\": 11.0\\n                                        }\\n                                    ],\\n                                    \\\"name\\\": \\\"pdays > 373.0\\\",\\n                                    \\\"side\\\": \\\"right\\\",\\n                                    \\\"type\\\": \\\"numerical\\\",\\n                                    \\\"size\\\": 12.0,\\n                                    \\\"pred\\\": \\\"1 of no, 11 of yes\\\"\\n                                },\\n                                {\\n                                    \\\"children\\\": [\\n                                        {\\n                                            \\\"name\\\": \\\"month = oct\\\",\\n                                            \\\"pred\\\": \\\"11 of no, 16 of yes\\\",\\n                                            \\\"type\\\": \\\"categorical\\\",\\n                                            \\\"side\\\": \\\"right\\\",\\n                                            \\\"size\\\": 27.0\\n                                        },\\n                                        {\\n                                            \\\"name\\\": \\\"month != oct\\\",\\n                                            \\\"pred\\\": \\\"1207 of no, 173 of yes\\\",\\n                                            \\\"type\\\": \\\"categorical\\\",\\n                                            \\\"side\\\": \\\"left\\\",\\n                                            \\\"size\\\": 1380.0\\n                                        }\\n                                    ],\\n                                    \\\"name\\\": \\\"pdays <= 373.0\\\",\\n                                    \\\"side\\\": \\\"left\\\",\\n                                    \\\"type\\\": \\\"numerical\\\",\\n                                    \\\"size\\\": 1407.0,\\n                                    \\\"pred\\\": \\\"1218 of no, 189 of yes\\\"\\n                                }\\n                            ],\\n                            \\\"name\\\": \\\"duration > 222.5\\\",\\n                            \\\"side\\\": \\\"right\\\",\\n                            \\\"type\\\": \\\"numerical\\\",\\n                            \\\"size\\\": 1419.0,\\n                            \\\"pred\\\": \\\"1219 of no, 200 of yes\\\"\\n                        },\\n                        {\\n                            \\\"children\\\": [\\n                                {\\n                                    \\\"children\\\": [\\n                                        {\\n                                            \\\"name\\\": \\\"day > 19.5\\\",\\n                                            \\\"pred\\\": \\\"6 of no, 9 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"right\\\",\\n                                            \\\"size\\\": 15.0\\n                                        },\\n                                        {\\n                                            \\\"name\\\": \\\"day <= 19.5\\\",\\n                                            \\\"pred\\\": \\\"20 of no, 1 of yes\\\",\\n                                            \\\"type\\\": \\\"numerical\\\",\\n                                            \\\"side\\\": \\\"left\\\",\\n                                            \\\"size\\\": 21.0\\n                                        }\\n                                    ],\\n                                    \\\"name\\\": \\\"month = oct\\\",\\n                                    \\\"side\\\": \\\"right\\\",\\n                                    \\\"type\\\": \\\"categorical\\\",\\n                                    \\\"size\\\": 36.0,\\n                                    \\\"pred\\\": \\\"26 of no, 10 of yes\\\"\\n                                },\\n                                {\\n                                    \\\"children\\\": [\\n                                        {\\n                                            \\\"name\\\": \\\"month = mar\\\",\\n                                            \\\"pred\\\": \\\"21 of no, 9 of yes\\\",\\n                                            \\\"type\\\": \\\"categorical\\\",\\n                                            \\\"side\\\": \\\"right\\\",\\n                                            \\\"size\\\": 30.0\\n                                        },\\n                                        {\\n                                            \\\"name\\\": \\\"month != mar\\\",\\n                                            \\\"pred\\\": \\\"2516 of no, 46 of yes\\\",\\n                                            \\\"type\\\": \\\"categorical\\\",\\n                                            \\\"side\\\": \\\"left\\\",\\n                                            \\\"size\\\": 2562.0\\n                                        }\\n                                    ],\\n                                    \\\"name\\\": \\\"month != oct\\\",\\n                                    \\\"side\\\": \\\"left\\\",\\n                                    \\\"type\\\": \\\"categorical\\\",\\n                                    \\\"size\\\": 2592.0,\\n                                    \\\"pred\\\": \\\"2537 of no, 55 of yes\\\"\\n                                }\\n                            ],\\n                            \\\"name\\\": \\\"duration <= 222.5\\\",\\n                            \\\"side\\\": \\\"left\\\",\\n                            \\\"type\\\": \\\"numerical\\\",\\n                            \\\"size\\\": 2628.0,\\n                            \\\"pred\\\": \\\"2563 of no, 65 of yes\\\"\\n                        }\\n                    ],\\n                    \\\"name\\\": \\\"poutcome != success\\\",\\n                    \\\"side\\\": \\\"left\\\",\\n                    \\\"type\\\": \\\"categorical\\\",\\n                    \\\"size\\\": 4047.0,\\n                    \\\"pred\\\": \\\"3782 of no, 265 of yes\\\"\\n                }\\n            ],\\n            \\\"name\\\": \\\"duration <= 645.5\\\",\\n            \\\"side\\\": \\\"left\\\",\\n            \\\"type\\\": \\\"numerical\\\",\\n            \\\"size\\\": 4162.0,\\n            \\\"pred\\\": \\\"3821 of no, 341 of yes\\\"\\n        }\\n    ],\\n    \\\"side\\\": \\\"right\\\",\\n    \\\"size\\\": 4521.0\\n}`;\\n                 var version2 = true // if true json from generator_2 will be used\\n\\n\\n                 var tree_branch = false // if the thickness of the branches depend on the value of targt + color * /\\n                 var tree_branch_parent = true //  true: thickness from the root if not the direct parent\\n                 var tree_branch_color = \\\"black\\\"\\n                 var strokeness = 120 //  the degree of separation between the nodes \\n                 var default_strokeness = 50\\n                 var hover_percent_parent = false // if the display percentage depends on the direct parent or the root\\n                 var square = false\\n                 var rect_percent = true //display the percentage or the value in the small rectangles of the labels \\n                 var value_percent_top = true /// if we display the value and the percentage above the rectangle /\\n\\n                 var dict_leaf_y = {\\n                     1: 0,\\n                     2: -17.5,\\n                     3: -35,\\n                     4: -52.5,\\n                     5: -70,\\n                     6: -87.5,\\n                     6: -105,\\n                     7: -122.5,\\n                     8: -140,\\n                     9: -157.5,\\n                     10: -175\\n                 }\\n\\n\\n                 /****************************************************************************************************** */\\n\\n\\n\\n\\n                 function getDepth(obj) {\\n                     var depth = 0;\\n                     if (obj.children) {\\n                         obj.children.forEach(function(d) {\\n                             var tmpDepth = getDepth(d)\\n                             if (tmpDepth > depth) {\\n                                 depth = tmpDepth\\n                             }\\n                         })\\n                     }\\n                     return 1 + depth\\n                 }\\n\\n\\n                 var margin = {\\n                         top: 20,\\n                         right: 120,\\n                         bottom: 20,\\n                         left: 180\\n                     },\\n                     width = 2000 + 960 - margin.right - margin.left,\\n                     height = 800 - margin.top - margin.bottom;\\n\\n                 var i = 0;\\n                 let duration = 550;\\n                 let root;\\n\\n                 var tree\\n                 var diagonal\\n                 var svg\\n\\n\\n                 const flare = JSON.parse(myData);\\n\\n                 tree = d3.layout.tree()\\n                     .separation(function(a, b) {\\n                         return ((a.parent == root) && (b.parent == root)) ? strokeness : strokeness;\\n                     })\\n                     .size([height, getDepth(flare) * width / 8]);\\n\\n                 diagonal = d3.svg.diagonal()\\n                     .projection(function(d) {\\n                         return [d.y, d.x];\\n                     });\\n\\n                $(decisionTree).empty();\\n                 svg = d3.select(decisionTree[0]).append(\\\"svg\\\")\\n                     .attr(\\\"width\\\", getDepth(flare) * width / 8 + margin.right + margin.left)\\n                     .attr(\\\"height\\\", height + margin.top + margin.bottom)\\n                     .append(\\\"g\\\")\\n                     .attr(\\\"transform\\\", \\\"translate(\\\" + margin.left + \\\",\\\" + margin.top + \\\")\\\");\\n\\n\\n                 const l = flare.pred.replace(/of/g, \\\"\\\").split(', ')\\n                 for (var j = 0; j < l.length; j++) {\\n                     l[j] = l[j].split(' ')[2]\\n                 }\\n                 label_names = l\\n\\n                 TOTAL_SIZE = flare.size\\n                 root = flare;\\n                 root.x0 = height / 2;\\n                 root.y0 = 0;\\n\\n                 function collapse(d) {\\n                     if (d.children) {\\n                         d._children = d.children;\\n                         d._children.forEach(collapse);\\n                         d.children = null;\\n                     }\\n                 }\\n\\n                 root.children.forEach(collapse);\\n                 update(root, l.length);\\n                 createLabels(l);\\n\\n\\n                 d3.select(self.frameElement).style(\\\"height\\\", \\\"480px\\\");\\n\\n                 function update(source, n_labels) {\\n\\n\\n                     // Compute the new tree layout.\\n                     var nodes = tree.nodes(root).reverse();\\n                     const links = tree.links(nodes);\\n                     const tpaths = tree.links(nodes);\\n\\n                     // Normalize for fixed-depth.\\n                     nodes.forEach(function(d) {\\n                         d.y = d.depth * 180;\\n                     });\\n\\n                     // Update the nodes…\\n                     var node = svg.selectAll(\\\"g.node\\\")\\n                         .data(nodes, function(d) {\\n                             return d.id || (d.id = ++i);\\n                         });\\n\\n                     // Enter any new nodes at the parent's previous position.\\n                     var nodeEnter = node.enter().append(\\\"g\\\")\\n                         .attr(\\\"class\\\", \\\"node\\\")\\n                         .attr(\\\"transform\\\", function(d) {\\n                             return \\\"translate(\\\" + source.y0 + \\\",\\\" + source.x0 + \\\")\\\";\\n                         })\\n                         .on(\\\"click\\\", click);\\n\\n                     nodeEnter.append(\\\"circle\\\")\\n                         .attr(\\\"r\\\", 1e-6)\\n                         .style(\\\"fill\\\", function(d) {\\n\\n                             return d._children ? \\\"lightsteelblue\\\" : \\\"#fff\\\";\\n                         });\\n\\n                     //   nodeEnter.append(\\\"text\\\")\\n                     //       .attr(\\\"x\\\", function(d) { return (d.children || d._children) || version2 ? -10 : 10; })\\n                     //       .attr(\\\"dy\\\", \\\".35em\\\")\\n                     //       .attr(\\\"text-anchor\\\", function(d) { return (d.children || d._children) || version2 ? \\\"end\\\" : \\\"start\\\"; })\\n                     //       .text(function(d) { return d.pred ? d.name+' '+d.pred : d.name; })\\n                     //       .style(\\\"fill-opacity\\\", 1e-6);\\n\\n                     function getTextWidth(text, fontSize, fontFace) {\\n                         var a = document.createElement('canvas');\\n                         var b = a.getContext('2d');\\n                         b.font = fontSize + 'px ' + fontFace;\\n                         return b.measureText(text).width;\\n                     }\\n\\n\\n\\n                     var rect = nodeEnter.append(\\\"rect\\\")\\n                         .attr(\\\"width\\\", 133 + 8)\\n                         .attr(\\\"height\\\", 70)\\n                         .attr(\\\"x\\\", -80)\\n                         .attr(\\\"y\\\", -80)\\n                         .attr(\\\"rx\\\", 6)\\n                         .attr(\\\"ry\\\", 6)\\n                         .style(\\\"fill\\\", function(d) {\\n                             return (d.children || d._children) || version2 ? \\\"#f0f0f0\\\" : \\\"#ffffff\\\"\\n                         })\\n                         .style(\\\"stroke\\\", function(d) {\\n                             return (d.children || d._children) || version2 ? \\\"rgb(155, 155, 155)\\\" : \\\"#ffffff\\\"\\n                         })\\n                         .style(\\\"visibility\\\", function(d) {\\n                             return (d.children || d._children) || version2 ? \\\"visible\\\" : \\\"hidden\\\"\\n                         })\\n\\n                     nodeEnter.append(\\\"svg:image\\\")\\n                         .attr(\\\"xlink:href\\\", function(d) {\\n                             return ((d.children || d._children) || version2) && d.type == 'categorical' ? 'http://fractalytics.io/wp-content/uploads/2019/05/cat.png' : 'http://fractalytics.io/wp-content/uploads/2019/05/num.png'\\n                         })\\n                         .attr(\\\"x\\\", \\\"-76\\\")\\n                         .attr(\\\"y\\\", \\\"-74\\\")\\n                         .attr(\\\"width\\\", \\\"20\\\")\\n                         .attr(\\\"height\\\", \\\"20\\\")\\n                         .style(\\\"visibility\\\", function(d) {\\n                             if (d.name.match(/(.*?)(<|>|=|!=|<=|>=|=<|=>)/i)) {\\n                                 return d.name.match(/(.*?)(<|>|=|!=|<=|>=|=<|=>)/i)[1] == 'Root ' ? 'hidden' : 'visible'\\n                             } else return (d.children || d._children) || version2 ? \\\"visible\\\" : \\\"hidden\\\"\\n                         });\\n\\n                     let ttr;\\n                     nodeEnter.append(\\\"text\\\")\\n                         .attr(\\\"x\\\", function(d) {\\n                             ttr = 13\\n                             if (default_colors.length > 5) {\\n                                 ttr = (40 * default_colors.length) / 2\\n                             }\\n                             return (d.children || d._children) || version2 ? -75 - ((getTextWidth(d.size + \\\" / \\\" + (d.size * 100 / TOTAL_SIZE).toFixed(0) + \\\"%\\\", 10, 'Verdana') + 5.7) - (133 + 8)) / 2 : ttr\\n                         })\\n                         .attr(\\\"y\\\", function(d) {\\n                             ttr = dict_leaf_y[label_names.length] - 15\\n                             if (default_colors.length > 5) {\\n                                 ttr = -20\\n                             }\\n                             return (d.children || d._children) || version2 ? -87 : ttr;\\n\\n                         })\\n                         .attr(\\\"dy\\\", \\\".35em\\\")\\n                         .attr(\\\"text-anchor\\\", \\\"start\\\")\\n                         .style(\\\"font-size\\\", \\\"10px\\\")\\n                         .style(\\\"font-family\\\", \\\"Verdana\\\")\\n                         .style(\\\"stroke\\\", \\\"#c2c2c2\\\")\\n                         .style(\\\"stroke-width\\\", \\\"0.05em\\\")\\n                         .text(function(d) {\\n                             return true ? d.size + \\\" / \\\" + (d.size * 100 / TOTAL_SIZE).toFixed(0) + \\\"%\\\" : \\\"\\\";\\n                         })\\n                         .attr('visibility', function() {\\n                             return value_percent_top ? 'visible' : 'hidden'\\n                         })\\n\\n\\n\\n\\n                     nodeEnter.append(\\\"text\\\")\\n                         .attr(\\\"x\\\", function(d) {\\n                             if (((d.children || d._children) || version2) && d.name.match(/(.*?)(<|>|=|!=|<=|>=|=<|=>)/i)[1].length <= 11) {\\n                                 return (d.children || d._children) || version2 ? -75 - ((getTextWidth(d.name.match(/(.*?)(<|>|=|!=|<=|>=|=<|=>)/i)[1], 14, 'Verdana') + 5.7) - (133 + 8)) / 2 : 0\\n                             } else return (d.children || d._children) || version2 ? -75 - ((getTextWidth(d.name.match(/(.*?)(<|>|=|!=|<=|>=|=<|=>)/i)[1].substring(0, 11), 14, 'Verdana') + 5.7) - (133 + 8)) / 2 : 0\\n                         })\\n                         .attr(\\\"y\\\", function(d) {\\n                             if (!d.name.match(/(.*?)(<|>|=|!=|<=|>=|=<|=>)/i)) return -65\\n                             else return d.name.match(/(.*?)(<|>|=|!=|<=|>=|=<|=>)/i)[1] == 'Root ' ? -55 : -65\\n                         })\\n                         .attr(\\\"dy\\\", \\\".35em\\\")\\n                         .attr(\\\"text-anchor\\\", \\\"start\\\")\\n                         .style(\\\"font-size\\\", \\\"14px\\\")\\n                         .style(\\\"font-family\\\", \\\"Verdana\\\")\\n                         .style(\\\"stroke\\\", \\\"black\\\")\\n                         .style(\\\"stroke-width\\\", \\\"0.05em\\\")\\n\\n                         .text(function(d) {\\n                             if ((d.children || d._children) || version2) {\\n                                 return d.name.match(/(.*?)(<|>|=|!=|<=|>=|=<|=>)/i)[1].length <= 15 ? d.name.match(/(.*?)(<|>|=|!=|<=|>=|=<|=>)/i)[1] : (d.name.match(/(.*?)(<|>|=|!=|<=|>=|=<|=>)/i)[1]).substring(0, 13) + '..'\\n\\n                             } else return \\\"\\\";\\n                         })\\n                         .append('svg:title')\\n                         .text(function(d) {\\n                             return (d.children || d._children) || version2 ? d.name.match(/(.*?)(<|>|=|!=|<=|>=|=<|=>)/i)[1] : \\\"\\\"\\n                         })\\n\\n\\n\\n\\n                     nodeEnter.append(\\\"text\\\")\\n                         .attr(\\\"x\\\", function(d) {\\n                             return (d.children || d._children) || version2 ? -75 - ((getTextWidth(d.name.replace(d.name.match(/(.*?)(<|>|=|!=|<=|>=|=<|=>)/i)[1], '').replace('=', ''), 14, 'Verdana') + 5.7) - (133 + 8)) / 2 : 0\\n                         })\\n                         .attr(\\\"y\\\", -45)\\n                         .attr(\\\"dy\\\", \\\".35em\\\")\\n                         .attr(\\\"text-anchor\\\", \\\"start\\\")\\n                         .style(\\\"font-size\\\", \\\"12px\\\")\\n                         .style(\\\"font-family\\\", \\\"Verdana\\\")\\n                         .style(\\\"stroke\\\", \\\"black\\\")\\n                         .style(\\\"stroke-width\\\", \\\"0.04em\\\")\\n                         .text(function(d) {\\n\\n                             var toreturn = (d.children || d._children) || version2 ? d.name.replace(d.name.match(/(.*?)(<|>|=|!=|<=|>=|=<|=>)/i)[1], '').replace('!=', 'not').replace(/=|\\\\!=/g, '').replace('<', '<=') : \\\"\\\";\\n                             if (!d.name.match(/(.*?)(<|>|=|!=|<=|>=|=<|=>)/i)) return toreturn\\n                             return d.name.match(/(.*?)(<|>|=|!=|<=|>=|=<|=>)/i)[1] == 'Root ' ? '' : toreturn\\n                         })\\n\\n\\n                     var labels_w = 133 / n_labels\\n                     for (var j = 0; j < n_labels; j++) {\\n                         var curr = j\\n\\n\\n                         let v;\\n                         nodeEnter.append(\\\"rect\\\")\\n                             .attr(\\\"width\\\", function(d) {\\n                                 if (d.pred) {\\n                                     //console.log(parseInt(d.pred.split(\\\",\\\")[curr].match(/\\\\d+/)[0]),' *133/',d.size)\\n                                     v = parseInt(d.pred.split(\\\",\\\")[curr].match(/\\\\d+/)[0]) * 133 / d.size;\\n                                 } else if (!d.children) {\\n                                     v = 40\\n                                 }\\n\\n                                 if (square) return (d.children || d._children) || version2 ? 133 / label_names.length - 4 : 40\\n                                 else return (d.children || d._children) || version2 ? v : 40\\n                             })\\n                             .attr(\\\"height\\\", 20)\\n                             .attr('rx', function(d) {\\n                                 return square ? 0 : 4\\n                             })\\n                             .attr('ry', function(d) {\\n                                 return square ? 0 : 4\\n                             })\\n                             .attr(\\\"x\\\", function(d) {\\n\\n                                 var v;\\n                                 var ttl = 0\\n                                 if (curr > 0) {\\n\\n                                     for (var l = 0; l <= curr - 1; l++) {\\n                                         if (d.pred) {\\n                                             v = parseInt(d.pred.split(\\\",\\\")[l].match(/\\\\d+/)[0]);\\n                                         } else if (!d.children) v = parseInt(d.name.split(\\\",\\\")[l].match(/\\\\d+/)[0]);\\n                                         ttl = ttl + v * 133 / d.size\\n                                     }\\n\\n                                 } else {\\n                                     ttl = 0\\n                                 }\\n\\n                                 ttr = 13\\n                                 if (default_colors.length > 5) {\\n                                     ttr = 10 + j * 45\\n                                 }\\n\\n\\n                                 if (square) return (d.children || d._children) || version2 ? -76 + j * (133 / label_names.length) : ttr\\n                                 else return (d.children || d._children) || version2 ? -76 + ttl : ttr\\n                             })\\n                             .attr(\\\"y\\\", (function(d) {\\n                                 //console.log(default_colors.length)\\n                                 if (default_colors.length > 5) {\\n                                     return (d.children || d._children) || version2 ? -34 : -10\\n                                 } else return (d.children || d._children) || version2 ? -34 : dict_leaf_y[label_names.length] - 4 + 20 * j + j * 4;\\n                             }))\\n                             .style(\\\"fill\\\", function(d) {\\n                                 if (default_colors.length == 0) {\\n                                     return default_colors[j]\\n                                 } else {\\n                                     return default_colors[j]\\n                                 }\\n\\n                             })\\n                             .attr('visibility', function(d) {\\n\\n                                 if (d.pred) {\\n                                     v = parseInt(d.pred.split(\\\",\\\")[curr].match(/\\\\d+/)[0]);\\n                                 } else if (!d.children) v = parseInt(d.name.split(\\\",\\\")[curr].match(/\\\\d+/)[0]);\\n                                 v = v * 133 / d.size\\n                                 return v != 0 || !d.children ? \\\"visible\\\" : \\\"hidden\\\"\\n                             })\\n                             .attr('opacity', function(d) {\\n                                 var val\\n                                 if (d.pred) {\\n                                     // console.log(d.pred.split(\\\",\\\")[curr].match(/\\\\d+/)[0])\\n                                     val = (parseInt(d.pred.split(\\\",\\\")[curr].match(/\\\\d+/)[0]) * 100 / d.size).toFixed(0)\\n                                 } else if (!d.children) val = (parseInt(d.name.split(\\\",\\\")[curr].match(/\\\\d+/)[0]) * 100 / d.size).toFixed(0)\\n                                 return (d.children || d._children) || version2 ? 1 : val / 100 + 0.3\\n\\n                             })\\n                             .append(\\\"svg:title\\\")\\n                             .text(function(d) {\\n                                 if (d.pred) {\\n                                     // console.log(d.pred.split(\\\",\\\")[curr].match(/\\\\d+/)[0])\\n                                     return !rect_percent ? d.pred.split(\\\",\\\")[curr].match(/\\\\d+/)[0] : (parseInt(d.pred.split(\\\",\\\")[curr].match(/\\\\d+/)[0]) * 100 / d.size).toFixed(0) + \\\"%\\\"\\n                                 } else if (!d.children) return !rect_percent ? d.name.split(\\\",\\\")[curr].match(/\\\\d+/)[0] : (parseInt(d.name.split(\\\",\\\")[curr].match(/\\\\d+/)[0]) * 100 / d.size).toFixed(0) + \\\"%\\\"\\n\\n                             })\\n\\n\\n\\n\\n                         var subg = nodeEnter.append(\\\"g\\\")\\n                             .attr(\\\"width\\\", labels_w)\\n                             .attr(\\\"height\\\", 20)\\n                             .attr(\\\"x\\\", function(d) {\\n                                 var v;\\n                                 var ttl = 0\\n                                 if (curr > 0) {\\n\\n                                     for (var l = 0; l <= curr - 1; l++) {\\n                                         if (d.pred) {\\n                                             v = parseInt(d.pred.split(\\\",\\\")[l].match(/\\\\d+/)[0]);\\n                                         } else if (!d.children) v = parseInt(d.name.split(\\\",\\\")[l].match(/\\\\d+/)[0]);\\n                                         ttl = ttl + v * 133 / d.size\\n                                     }\\n\\n                                 } else {\\n                                     ttl = 0\\n                                 }\\n\\n                                 return -80 + ttl\\n\\n                             })\\n                             .attr(\\\"y\\\", -30)\\n\\n\\n                         subg.append(\\\"text\\\")\\n                             .text(function(d) {\\n                                 if (d.pred) {\\n                                     // console.log(d.pred.split(\\\",\\\")[curr].match(/\\\\d+/)[0])\\n                                     return !rect_percent ? d.pred.split(\\\",\\\")[curr].match(/\\\\d+/)[0] : (parseInt(d.pred.split(\\\",\\\")[curr].match(/\\\\d+/)[0]) * 100 / d.size).toFixed(0) + \\\"%\\\"\\n                                 } else if (!d.children) return !rect_percent ? d.name.split(\\\",\\\")[curr].match(/\\\\d+/)[0] : (parseInt(d.name.split(\\\",\\\")[curr].match(/\\\\d+/)[0]) * 100 / d.size).toFixed(0) + \\\"%\\\"\\n\\n                             })\\n                             .attr(\\\"x\\\", (function(d) {\\n\\n                                 var v;\\n                                 var ttl = 0\\n                                 if (curr > 0) {\\n\\n                                     for (var l = 0; l <= curr - 1; l++) {\\n                                         if (d.pred) {\\n                                             v = parseInt(d.pred.split(\\\",\\\")[l].match(/\\\\d+/)[0]);\\n                                         } else if (!d.children) v = parseInt(d.name.split(\\\",\\\")[l].match(/\\\\d+/)[0]);\\n                                         ttl = ttl + v * 133 / d.size\\n                                     }\\n\\n                                 } else {\\n                                     ttl = 0\\n                                 }\\n\\n                                 ttr = 18\\n                                 if (default_colors.length > 5) {\\n                                     ttr = 14 + j * 45\\n                                 }\\n\\n                                 if (square) return (d.children || d._children) || version2 ? -71 + j * (133 / label_names.length) : ttr\\n                                 else return (d.children || d._children) || version2 ? -71 + ttl : ttr\\n                             }))\\n                             .attr(\\\"y\\\", (function(d) {\\n                                 ttr = dict_leaf_y[label_names.length] + 10 + 20 * j + j * 4\\n                                 if (default_colors.length > 5) {\\n                                     ttr = 5\\n                                 }\\n\\n                                 return (d.children || d._children) || version2 ? -19 : ttr;\\n\\n                             }))\\n                             .style(\\\"fill\\\", \\\"white\\\")\\n                             .style(\\\"font-size\\\", \\\"12px\\\")\\n                             .attr('visibility', function(d) {\\n                                 if (d.pred && !square) {\\n                                     // console.log(d.pred.split(\\\",\\\")[curr].match(/\\\\d+/)[0])\\n                                     return (parseInt(d.pred.split(\\\",\\\")[curr].match(/\\\\d+/)[0]) * 100 / d.size).toFixed(0) > 20 ? \\\"vivible\\\" : \\\"hidden\\\"\\n                                 }\\n                             })\\n                             .append(\\\"svg:title\\\")\\n                             .text(function(d) {\\n                                 if (d.pred) {\\n                                     // console.log(d.pred.split(\\\",\\\")[curr].match(/\\\\d+/)[0])\\n                                     return !rect_percent ? d.pred.split(\\\",\\\")[curr].match(/\\\\d+/)[0] : (parseInt(d.pred.split(\\\",\\\")[curr].match(/\\\\d+/)[0]) * 100 / d.size).toFixed(0) + \\\"%\\\"\\n                                 } else if (!d.children) return !rect_percent ? d.name.split(\\\",\\\")[curr].match(/\\\\d+/)[0] : (parseInt(d.name.split(\\\",\\\")[curr].match(/\\\\d+/)[0]) * 100 / d.size).toFixed(0) + \\\"%\\\"\\n\\n                             })\\n\\n                         subg.append('text')\\n                             .text(function(d) {\\n                                 if (d.pred) {\\n                                     return ''\\n                                 } else if (!d.children) {\\n                                     return label_names[curr]\\n                                 }\\n                             })\\n                             .attr(\\\"x\\\", (function(d) {\\n                                 ttr = 60\\n                                 if (default_colors.length > 5) {\\n                                     ttr = 18 + j * 45\\n                                 }\\n                                 return (d.children || d._children) || version2 ? -66 + j * labels_w : ttr\\n                             }))\\n                             .attr(\\\"y\\\", (function(d) {\\n                                 ttr = dict_leaf_y[label_names.length] + 10 + 20 * j + j * 4\\n                                 if (default_colors.length > 5) {\\n                                     ttr = 25\\n                                 }\\n                                 return (d.children || d._children) || version2 ? -15 : ttr;\\n                             }))\\n                             .style(\\\"font-size\\\", \\\"14px\\\")\\n                             .style(\\\"fill\\\", \\\"rgb(78, 74, 74)\\\")\\n                             .attr('transform', function(d) {\\n\\n                                 return default_colors.length <= 5 ? '' : 'translate(' + (-30 + j * 20) + ',' + (10 + j * (-37)) + ') rotate(55 50 50)'\\n                             })\\n\\n\\n\\n                     }\\n\\n\\n\\n                     //   nodeEnter.append(\\\"text\\\")\\n                     //   .attr(\\\"x\\\", function(d) { return (d.children || d._children) || version2 ? -10 : 10; })\\n                     //   .attr(\\\"dy\\\", \\\".35em\\\")\\n                     //   .attr(\\\"text-anchor\\\", function(d) { return (d.children || d._children) || version2 ? \\\"end\\\" : \\\"start\\\"; })\\n                     //   .text(function(d) { return d.pred ? d.pred : ''; })\\n                     //   .style(\\\"fill-opacity\\\", 1e-6)\\n\\n\\n\\n                     // Transition nodes to their new position.\\n                     var nodeUpdate = node.transition()\\n                         .duration(duration)\\n                         .attr(\\\"transform\\\", function(d) {\\n                             return \\\"translate(\\\" + d.y + \\\",\\\" + d.x + \\\")\\\";\\n                         });\\n\\n                     nodeUpdate.select(\\\"circle\\\")\\n                         .attr(\\\"r\\\", 10)\\n                         .style(\\\"fill\\\", function(d) {\\n                             return d._children ? \\\"lightsteelblue\\\" : \\\"#fff\\\";\\n                         });\\n\\n                     nodeUpdate.select(\\\"text\\\")\\n                         .style(\\\"fill-opacity\\\", 1);\\n\\n                     // Transition exiting nodes to the parent's new position.\\n                     var nodeExit = node.exit().transition()\\n                         .duration(duration)\\n                         .attr(\\\"transform\\\", function(d) {\\n                             return \\\"translate(\\\" + source.y + \\\",\\\" + source.x + \\\")\\\";\\n                         })\\n                         .remove();\\n\\n                     nodeExit.select(\\\"circle\\\")\\n                         .attr(\\\"r\\\", 1e-6);\\n\\n                     nodeExit.select(\\\"text\\\")\\n                         .style(\\\"fill-opacity\\\", 1e-6);\\n\\n                     // Update the links…\\n                     var link = svg.selectAll(\\\"path.link\\\")\\n                         .data(links, function(d) {\\n                             return d.target.id;\\n                         });\\n\\n\\n                     if (tree_branch) var link_stoke_scale = d3.scale.linear().domain([0, 100]).range([1.5, default_strokeness]);\\n                     else var link_stoke_scale = d3.scale.linear().domain([0, 100]).range([1.5, 8]);\\n\\n                     var color = d3.scale.linear()\\n                         .domain([0, 50, 100])\\n                         .range([\\\"rgb(2, 255, 219)\\\", \\\"blue\\\"]);\\n\\n\\n                     // Enter any new links at the parent's previous position.\\n                     link.enter().insert(\\\"path\\\", \\\"g\\\")\\n                         .attr(\\\"class\\\", \\\"link\\\")\\n                         .attr(\\\"id\\\", function(d) {\\n                             return d.target.id;\\n                         })\\n                         .attr(\\\"d\\\", function(d) {\\n                             var o = {\\n                                 x: source.x0,\\n                                 y: source.y0\\n                             };\\n                             return diagonal({\\n                                 source: o,\\n                                 target: o\\n                             });\\n                         })\\n                         .style(\\\"stroke-width\\\", function(d) {\\n\\n                             if (!d.target) {\\n                                 return link_stoke_scale(50)\\n                             } else {\\n                                 if (tree_branch) {\\n                                     //   console.log(d.target.size,'*100/',TOTAL_SIZE,link_stoke_scale(d.target.size*100/TOTAL_SIZE),tree_branch_parent)\\n                                     //   console.log(d.target.size,'*100/',d.source.size,link_stoke_scale(d.target.size*100/d.source.size),tree_branch_parent)\\n\\n                                     return tree_branch_parent ? link_stoke_scale(d.target.size * 100 / TOTAL_SIZE) : link_stoke_scale(d.target.size * 100 / d.source.size)\\n                                 } else {\\n\\n                                     return link_stoke_scale(50)\\n                                 }\\n                             }\\n                         })\\n                         .style(\\\"stroke\\\", function(d) {\\n\\n                             if (!d.target) {\\n                                 return \\\"#fff\\\"\\n                             } else return tree_branch_color;\\n                         })\\n                         .append(\\\"svg:title\\\")\\n                         .text(function(d, i) {\\n                             if (hover_percent_parent) {\\n                                 var val = ((d.target.size / TOTAL_SIZE) * 100).toFixed(2);\\n                             } else {\\n                                 var val = ((d.target.size / d.source.size) * 100).toFixed(2);\\n                             }\\n\\n                             return val + \\\"%\\\"\\n                         })\\n\\n                     var tlink = svg.selectAll(\\\"text.tlink\\\")\\n                         .data(tpaths, function(d) {\\n                             return d.target.id;\\n                         });\\n\\n                     tlink.enter().insert(\\\"text\\\", \\\"g\\\")\\n                         .attr(\\\"class\\\", \\\"tlink\\\")\\n                         .attr(\\\"dy\\\", function(d) {\\n                             return d.target.side == \\\"left\\\" ? -10 : 15;\\n                         })\\n                         .append('textPath')\\n                         .attr(\\\"xlink:href\\\", function(d) {\\n                             return '#' + d.target.id;\\n                         }) //place the ID of the path here\\n                         .style(\\\"text-anchor\\\", \\\"middle\\\") //place the text halfway on the arc\\n                         .attr(\\\"startOffset\\\", \\\"45%\\\")\\n                         .text(function(d) {\\n                             return d.target.side == \\\"left\\\" ? \\\"No\\\" : \\\"Yes\\\";\\n                         })\\n                         .attr('visibility', function(d) {\\n                             return d.target.depth == 1 && !version2 ? 'hidden' : 'hidden'\\n                         })\\n\\n\\n                     tlink.exit().transition()\\n                         .duration(duration)\\n                         .attr(\\\"d\\\", function(d) {\\n                             var o = {\\n                                 x: source.x,\\n                                 y: source.y\\n                             };\\n                             return diagonal({\\n                                 source: o,\\n                                 target: o\\n                             });\\n                         })\\n                         .remove();\\n\\n                     // Transition links to their new position.\\n                     link.transition()\\n                         .duration(duration)\\n                         .attr(\\\"d\\\", diagonal)\\n                         .style(\\\"stroke-width\\\", function(d) {\\n\\n                             if (!d.target) {\\n                                 return link_stoke_scale(50)\\n                             } else {\\n                                 if (tree_branch) {\\n                                     //   console.log(d.target.size,'*100/',TOTAL_SIZE,link_stoke_scale(d.target.size*100/TOTAL_SIZE),tree_branch_parent)\\n                                     //   console.log(d.target.size,'*100/',d.source.size,link_stoke_scale(d.target.size*100/d.source.size),tree_branch_parent)\\n\\n                                     return tree_branch_parent ? link_stoke_scale(d.target.size * 100 / TOTAL_SIZE) : link_stoke_scale(d.target.size * 100 / d.source.size)\\n                                 } else {\\n\\n                                     return link_stoke_scale(50)\\n                                 }\\n                             }\\n                         });\\n\\n\\n                     // Transition exiting nodes to the parent's new position.\\n                     link.exit().transition()\\n                         .duration(duration)\\n                         .attr(\\\"d\\\", function(d) {\\n                             var o = {\\n                                 x: source.x,\\n                                 y: source.y\\n                             };\\n                             return diagonal({\\n                                 source: o,\\n                                 target: o\\n                             });\\n                         })\\n                         .remove();\\n\\n                     // Stash the old positions for transition.\\n                     nodes.forEach(function(d) {\\n                         d.x0 = d.x;\\n                         d.y0 = d.y;\\n                     });\\n\\n\\n                     // Toggle children on click.\\n                     function click(d) {\\n                         if (d.children) {\\n                             d._children = d.children;\\n                             d.children = null;\\n                         } else {\\n                             d.children = d._children;\\n                             d._children = null;\\n                         }\\n                         update(d, n_labels);\\n                     }\\n\\n\\n                 }\\n\\n\\n\\n\\n                 function createLabels(labels) {\\n\\n                    // Dive: Get legend location from shadow DOM\\n                    let legend_location;\\n                    const elements = $('.output-vis');\\n                    let shadow;\\n                    for (let elem of elements) {\\n                        shadow = elem.shadowRoot;\\n                        legend_location = $(shadow).find(\\\"#legendLocation\\\");\\n                        if ($(legend_location).length > 0) {\\n                            break;\\n                        }\\n                    }\\n\\n                     var Width = 400;\\n                     var Height = 80;\\n                     var Size = 400;\\n\\n                    $(legend_location).empty();\\n                     var svg1 = d3.select(legend_location[0])\\n                         .append(\\\"svg\\\")\\n                         .attr(\\\"width\\\", Width)\\n                         .attr(\\\"height\\\", Height);\\n\\n                     //console.log(labels.length)\\n                     //console.log(default_colors.slice(0,labels.length))\\n                     default_colors = default_colors.slice(0, labels.length)\\n                     if (default_colors.length == 2) default_colors.push('')\\n                     if (default_colors.length == 0) {\\n                         var c_l = default_colors\\n                     } else {\\n                         var c_l = default_colors\\n                     }\\n\\n                     for (i = 0; i < c_l.length; i++) {\\n\\n                         //console.log(labels[i],\\\"\\\",c_l[i])\\n\\n                         var legendG = svg1\\n                             .append(\\\"g\\\")\\n                             .attr(\\\"transform\\\", function(d) {\\n                                 return \\\"translate(\\\" + 0 + \\\",\\\" + (30 * i + Size / 33 + Size / 50) + \\\")\\\"; // place each legend on the right and bump each one down 15 pixels\\n                             })\\n                             .attr(\\\"class\\\", \\\"legend\\\");\\n\\n                         legendG.append(\\\"rect\\\") // make a matching color rect\\n                             .attr(\\\"width\\\", 15)\\n                             .attr(\\\"height\\\", 15)\\n                             .attr(\\\"fill\\\", c_l[i])\\n                             .style('visibility', function() {\\n                                 return labels[i] ? \\\"visible\\\" : \\\"hidden\\\"\\n                             });\\n\\n                         legendG.append(\\\"text\\\") // add the text\\n                             .text(labels[i])\\n                             .style(\\\"font-size\\\", 30)\\n                             .attr(\\\"y\\\", 12)\\n                             .attr(\\\"x\\\", 21);\\n\\n                     }\\n\\n                 }\\n    });\\n}\\n})\",\"multiquerydsl\":\"{\\n\\n}\",\"formula\":\"<style>\\n.node {\\n  cursor: pointer;\\n}\\n\\n.node circle {\\n  fill: #fff;\\n  stroke: steelblue;\\n  stroke-width: 1.5px;\\n}\\n\\n.node text {\\n  font: 10px sans-serif;\\n}\\n\\n.link {\\n  fill: none;\\n  stroke:#6ff800;\\n}\\n\\n.main{\\n    position: relative;\\n    top: 99px;\\n    z-index: 5\\n}\\n\\n\\n.tlink{\\n  stroke: rgb(158, 156, 156);\\nfont-family: Verdana;\\nfont-size: 12px;\\nstroke-width: 0.04em;\\n}\\n</style>\\n\\n<html lang=\\\"en\\\">\\n<head>\\n\\t<title>Decision tree</title>\\n</head>\\n<body>\\n    <div id=\\\"dataView\\\"></div>\\n    <div id=\\\"legendLocation\\\"></div>\\n</body>\",\"dimensions\":{\"metric\":[]}}}"},"id":"8cd8fed0-dc7f-11ea-9945-5110b858bbd6","migrationVersion":{"visualization":"7.10.0"},"references":[],"type":"visualization","updated_at":"2021-10-29T15:31:17.317Z","version":"WzIzLDJd"}
{"exportedCount":19,"missingRefCount":0,"missingReferences":[]}